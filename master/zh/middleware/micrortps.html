
<!DOCTYPE HTML>
<html lang="zh" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>RTPS/ROS2 Interface · PX4 Developer Guide</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-versions-select/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="micrortps_throughput_test.html" />
    
    
    <link rel="prev" href="mavlink.html" />
    

    </head>
    <body>
        
    
    <!-- ##HW Add dronecode menu -->
    <div id="common_dronecode_menu">

      <div class="common_menu_logo large_version">
        <a href="https://www.dronecode.org/">
          <img src="../../gitbook/gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_full.png" alt="Dronecode logo (large)" />
        </a>
      </div>
      <div class="common_menu_logo small_version">
        <a href="https://www.dronecode.org/">
          <img src="../../gitbook/gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_small.png" alt="Dronecode logo (small)" />
        </a>
      </div>
      
      <div class="common_menu_options">
        
            <div class="common_dronecode_menu_item"><a href="http://px4.io/">PX4</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="http://qgroundcontrol.com/">QGroundControl</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="http://qgroundcontrol.com/">QGC</a></div>
            <div class="common_dronecode_menu_item"><a href="https://www.dronecode.org/sdk/">SDK</a></div>
            <div class="common_dronecode_menu_item"><a href="https://mavlink.io/en/">MAVLink</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="https://www.dronecode.org/documentation/">Documentation</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="https://www.dronecode.org/documentation/">Docs</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="http://discuss.px4.io/">Support</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="http://discuss.px4.io/">Help</a></div>
        
      </div>
    </div>
    
<!-- ##HW END Add dronecode menu -->
    
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="輸入並搜尋" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../setup/getting_started.html">
            
                <a href="../setup/getting_started.html">
            
                    
                    由此开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../setup/config_initial.html">
            
                <a href="../setup/config_initial.html">
            
                    
                    初始设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../setup/dev_env.html">
            
                <a href="../setup/dev_env.html">
            
                    
                    工具链安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../setup/dev_env_mac.html">
            
                <a href="../setup/dev_env_mac.html">
            
                    
                    Mac OS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../setup/dev_env_linux.html">
            
                <a href="../setup/dev_env_linux.html">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.2.1" data-path="../setup/dev_env_linux_ubuntu.html">
            
                <a href="../setup/dev_env_linux_ubuntu.html">
            
                    
                    Ubuntu/Debian Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.2" data-path="../setup/dev_env_linux_centos.html">
            
                <a href="../setup/dev_env_linux_centos.html">
            
                    
                    CentOS Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.3" data-path="../setup/dev_env_linux_arch.html">
            
                <a href="../setup/dev_env_linux_arch.html">
            
                    
                    Arch Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.4" data-path="../setup/dev_env_advanced_linux.html">
            
                <a href="../setup/dev_env_advanced_linux.html">
            
                    
                    高级 Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../setup/dev_env_windows.html">
            
                <a href="../setup/dev_env_windows.html">
            
                    
                    Windows
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.3.1" data-path="../setup/dev_env_windows_cygwin.html">
            
                <a href="../setup/dev_env_windows_cygwin.html">
            
                    
                    Cygwin 工具链
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3.2" data-path="../setup/dev_env_windows_vm.html">
            
                <a href="../setup/dev_env_windows_vm.html">
            
                    
                    Virtual Machine 工具链
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3.3" data-path="../setup/dev_env_windows_bash_on_win.html">
            
                <a href="../setup/dev_env_windows_bash_on_win.html">
            
                    
                    Bash on Windows 工具链
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../setup/vscode.html">
            
                <a href="../setup/vscode.html">
            
                    
                    Visual Studio Code IDE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../setup/fast-rtps-installation.html">
            
                <a href="../setup/fast-rtps-installation.html">
            
                    
                    Fast RTPS installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../setup/generic_dev_tools.html">
            
                <a href="../setup/generic_dev_tools.html">
            
                    
                    Additional Tools
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../setup/building_px4.html">
            
                <a href="../setup/building_px4.html">
            
                    
                    构建代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../apps/hello_sky.html">
            
                <a href="../apps/hello_sky.html">
            
                    
                    编写您的第一个应用程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../apps/module_template.html">
            
                <a href="../apps/module_template.html">
            
                    
                    应用/模块模板
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../concept/">
            
                <a href="../concept/">
            
                    
                    概念
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../concept/architecture.html">
            
                <a href="../concept/architecture.html">
            
                    
                    PX4 系统架构概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../flight_stack/controller_diagrams.html">
            
                <a href="../flight_stack/controller_diagrams.html">
            
                    
                    控制器图解
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../concept/dronecode_architecture.html">
            
                <a href="../concept/dronecode_architecture.html">
            
                    
                    Dronecode 平台概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../concept/flight_modes.html">
            
                <a href="../concept/flight_modes.html">
            
                    
                    飞行模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../concept/flight_tasks.html">
            
                <a href="../concept/flight_tasks.html">
            
                    
                    Flight Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../concept/mixing.html">
            
                <a href="../concept/mixing.html">
            
                    
                    Mixing and Actuators
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../concept/custom_mixer_payload.html">
            
                <a href="../concept/custom_mixer_payload.html">
            
                    
                    Custom Payload Mixer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../concept/pwm_limit.html">
            
                <a href="../concept/pwm_limit.html">
            
                    
                    PWM limit state machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../concept/system_startup.html">
            
                <a href="../concept/system_startup.html">
            
                    
                    System Startup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../concept/sd_card_layout.html">
            
                <a href="../concept/sd_card_layout.html">
            
                    
                    SD Card Layout
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../simulation/">
            
                <a href="../simulation/">
            
                    
                    仿真
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../simulation/jmavsim.html">
            
                <a href="../simulation/jmavsim.html">
            
                    
                    jMAVSim 仿真模拟
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../simulation/multi_vehicle_jmavsim.html">
            
                <a href="../simulation/multi_vehicle_jmavsim.html">
            
                    
                    Multi-Vehicle Sim with JMAVSim
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../simulation/gazebo.html">
            
                <a href="../simulation/gazebo.html">
            
                    
                    Gazebo 仿真模拟
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../simulation/gazebo_vehicles.html">
            
                <a href="../simulation/gazebo_vehicles.html">
            
                    
                    Gazebo Vehicles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../simulation/gazebo_worlds.html">
            
                <a href="../simulation/gazebo_worlds.html">
            
                    
                    Gazebo Worlds
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../simulation/multi_vehicle_simulation_gazebo.html">
            
                <a href="../simulation/multi_vehicle_simulation_gazebo.html">
            
                    
                    Multi-Vehicle Sim with Gazebo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../simulation/flightgear.html">
            
                <a href="../simulation/flightgear.html">
            
                    
                    FlightGear Simulation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../simulation/flightgear_vehicles.html">
            
                <a href="../simulation/flightgear_vehicles.html">
            
                    
                    FlightGear Vehicles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../simulation/multi_vehicle_flightgear.html">
            
                <a href="../simulation/multi_vehicle_flightgear.html">
            
                    
                    Multi-Vehicle Sim with FlightGear
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../simulation/jsbsim.html">
            
                <a href="../simulation/jsbsim.html">
            
                    
                    JSBSim Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../simulation/airsim.html">
            
                <a href="../simulation/airsim.html">
            
                    
                    AirSim Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../simulation/multi-vehicle-simulation.html">
            
                <a href="../simulation/multi-vehicle-simulation.html">
            
                    
                    Multi-Vehicle Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../simulation/failsafes.html">
            
                <a href="../simulation/failsafes.html">
            
                    
                    Simulate Failsafes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../simulation/hitl.html">
            
                <a href="../simulation/hitl.html">
            
                    
                    HITL Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../simulation/simulation-in-hardware.html">
            
                <a href="../simulation/simulation-in-hardware.html">
            
                    
                    Simulation-In-Hardware
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../hardware/">
            
                <a href="../hardware/">
            
                    
                    硬件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../hardware/reference_design.html">
            
                <a href="../hardware/reference_design.html">
            
                    
                    飞行控制器参考设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../hardware/board_support_guide.html">
            
                <a href="../hardware/board_support_guide.html">
            
                    
                    Manufacturer’s Board Support Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../hardware/porting_guide.html">
            
                <a href="../hardware/porting_guide.html">
            
                    
                    Flight Controller Porting Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../hardware/porting_guide_nuttx.html">
            
                <a href="../hardware/porting_guide_nuttx.html">
            
                    
                    NuttX Board Porting Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../airframes/">
            
                <a href="../airframes/">
            
                    
                    Airframes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="../airframes/airframe_reference.html">
            
                <a href="../airframes/airframe_reference.html">
            
                    
                    Airframes Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.2" data-path="../airframes/adding_a_new_frame.html">
            
                <a href="../airframes/adding_a_new_frame.html">
            
                    
                    Adding a New Airframe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="drivers.html">
            
                <a href="drivers.html">
            
                    
                    Device Drivers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../data_links/telemetry.html">
            
                <a href="../data_links/telemetry.html">
            
                    
                    Telemetry Radio
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.6.1" data-path="../data_links/sik_radio.html">
            
                <a href="../data_links/sik_radio.html">
            
                    
                    SiK Radio
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../sensor_bus/">
            
                <a href="../sensor_bus/">
            
                    
                    Sensor and Actuator I/O
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.1" data-path="../sensor_bus/i2c.html">
            
                <a href="../sensor_bus/i2c.html">
            
                    
                    I2C Bus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2" data-path="../uavcan/">
            
                <a href="../uavcan/">
            
                    
                    UAVCAN Bus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.2.1" data-path="../uavcan/bootloader_installation.html">
            
                <a href="../uavcan/bootloader_installation.html">
            
                    
                    UAVCAN Bootloader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.2" data-path="../uavcan/node_firmware.html">
            
                <a href="../uavcan/node_firmware.html">
            
                    
                    UAVCAN Firmware Upgrades
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.3" data-path="../uavcan/node_enumeration.html">
            
                <a href="../uavcan/node_enumeration.html">
            
                    
                    UAVCAN Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.4" data-path="../uavcan/notes.html">
            
                <a href="../uavcan/notes.html">
            
                    
                    UAVCAN Various Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.7.3" data-path="../uart/">
            
                <a href="../uart/">
            
                    
                    UART/Serial Ports
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.3.1" data-path="../uart/user_configurable_serial_driver.html">
            
                <a href="../uart/user_configurable_serial_driver.html">
            
                    
                    Port-Configurable Serial Drivers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../advanced/rtk_gps.html">
            
                <a href="../advanced/rtk_gps.html">
            
                    
                    RTK GPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../advanced/gimbal_control.html">
            
                <a href="../advanced/gimbal_control.html">
            
                    
                    Gimbal (Mount) Control Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../companion_computer/pixhawk_companion.html">
            
                <a href="../companion_computer/pixhawk_companion.html">
            
                    
                    Companion Computers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="uorb.html">
            
                <a href="uorb.html">
            
                    
                    uORB 消息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="mavlink.html">
            
                <a href="mavlink.html">
            
                    
                    MAVLink Messaging
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.3" data-path="micrortps.html">
            
                <a href="micrortps.html">
            
                    
                    RTPS/ROS2 Interface
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="micrortps_throughput_test.html">
            
                <a href="micrortps_throughput_test.html">
            
                    
                    Throughput Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="micrortps_manual_code_generation.html">
            
                <a href="micrortps_manual_code_generation.html">
            
                    
                    Manually Generate Client/Agent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="modules_main.html">
            
                <a href="modules_main.html">
            
                    
                    模块 & 命令
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="modules_command.html">
            
                <a href="modules_command.html">
            
                    
                    命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="modules_communication.html">
            
                <a href="modules_communication.html">
            
                    
                    通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="modules_controller.html">
            
                <a href="modules_controller.html">
            
                    
                    控制器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="modules_driver.html">
            
                <a href="modules_driver.html">
            
                    
                    驱动
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="modules_driver_airspeed_sensor.html">
            
                <a href="modules_driver_airspeed_sensor.html">
            
                    
                    Airspeed Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="modules_driver_baro.html">
            
                <a href="modules_driver_baro.html">
            
                    
                    Baro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="modules_driver_distance_sensor.html">
            
                <a href="modules_driver_distance_sensor.html">
            
                    
                    Distance Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.4" data-path="modules_driver_imu.html">
            
                <a href="modules_driver_imu.html">
            
                    
                    IMU
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.5" data-path="modules_driver_magnetometer.html">
            
                <a href="modules_driver_magnetometer.html">
            
                    
                    Magnetometer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="modules_estimator.html">
            
                <a href="modules_estimator.html">
            
                    
                    估计器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="modules_simulation.html">
            
                <a href="modules_simulation.html">
            
                    
                    Simulations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="modules_system.html">
            
                <a href="modules_system.html">
            
                    
                    System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="modules_template.html">
            
                <a href="modules_template.html">
            
                    
                    Template
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../robotics/">
            
                <a href="../robotics/">
            
                    
                    机器人技术
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../ros/offboard_control.html">
            
                <a href="../ros/offboard_control.html">
            
                    
                    Linux 的离板模式控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../ros/">
            
                <a href="../ros/">
            
                    
                    ROS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="../ros/mavros_installation.html">
            
                <a href="../ros/mavros_installation.html">
            
                    
                    MAVROS \（ROS 上的 MAVLink\）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="../ros/mavros_offboard.html">
            
                <a href="../ros/mavros_offboard.html">
            
                    
                    MAVROS 离板例程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="../simulation/ros_interface.html">
            
                <a href="../simulation/ros_interface.html">
            
                    
                    另见 Gazebo 模拟。
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="../simulation/gazebo_octomap.html">
            
                <a href="../simulation/gazebo_octomap.html">
            
                    
                    具有 ROS 的 OctoMap 模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="../ros/raspberrypi_installation.html">
            
                <a href="../ros/raspberrypi_installation.html">
            
                    
                    在 RPi 上安装 ROS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.6" data-path="../ros/external_position_estimation.html">
            
                <a href="../ros/external_position_estimation.html">
            
                    
                    外部位置估计（基于视觉/运动）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.7" data-path="../ros/mavros_custom_messages.html">
            
                <a href="../ros/mavros_custom_messages.html">
            
                    
                    Sending Custom Messages from MAVROS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../robotics/dronekit.html">
            
                <a href="../robotics/dronekit.html">
            
                    
                    DroneKit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../debug/">
            
                <a href="../debug/">
            
                    
                    调试日志
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../debug/faq.html">
            
                <a href="../debug/faq.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../debug/consoles.html">
            
                <a href="../debug/consoles.html">
            
                    
                    Consoles/Shells
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../debug/mavlink_shell.html">
            
                <a href="../debug/mavlink_shell.html">
            
                    
                    MAVLink Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="../debug/system_console.html">
            
                <a href="../debug/system_console.html">
            
                    
                    System Console
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../debug/swd_debug.html">
            
                <a href="../debug/swd_debug.html">
            
                    
                    SWD/JLink Debug Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../debug/gdb_debugging.html">
            
                <a href="../debug/gdb_debugging.html">
            
                    
                    Autopilot Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../debug/eclipse_jlink.html">
            
                <a href="../debug/eclipse_jlink.html">
            
                    
                    Eclipse/JLink Hardware Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../debug/sensor_uorb_topic_debugging.html">
            
                <a href="../debug/sensor_uorb_topic_debugging.html">
            
                    
                    Sensor/Topic Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../debug/simulation_debugging.html">
            
                <a href="../debug/simulation_debugging.html">
            
                    
                    Simulation Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../debug/debug_values.html">
            
                <a href="../debug/debug_values.html">
            
                    
                    Sending Debug Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../debug/system_wide_replay.html">
            
                <a href="../debug/system_wide_replay.html">
            
                    
                    System-wide Replay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../debug/profiling.html">
            
                <a href="../debug/profiling.html">
            
                    
                    Profiling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../log/logging.html">
            
                <a href="../log/logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../log/flight_log_analysis.html">
            
                <a href="../log/flight_log_analysis.html">
            
                    
                    Flight Log Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.13" data-path="../log/ulog_file_format.html">
            
                <a href="../log/ulog_file_format.html">
            
                    
                    ULog File Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../tutorials/tutorials.html">
            
                <a href="../tutorials/tutorials.html">
            
                    
                    教程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../qgc/">
            
                <a href="../qgc/">
            
                    
                    地面控制站
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../qgc/video_streaming.html">
            
                <a href="../qgc/video_streaming.html">
            
                    
                    Video Streaming from Odroid C1 to QGC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../qgc/video_streaming_wifi_broadcast.html">
            
                <a href="../qgc/video_streaming_wifi_broadcast.html">
            
                    
                    远距离视频流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../tutorials/linux_sbus.html">
            
                <a href="../tutorials/linux_sbus.html">
            
                    
                    Connecting an RC Receiver on Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    高级主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../advanced/parameters_and_configurations.html">
            
                <a href="../advanced/parameters_and_configurations.html">
            
                    
                    参数 & 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../advanced/parameter_reference.html">
            
                <a href="../advanced/parameter_reference.html">
            
                    
                    参数参照表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../advanced/computer_vision.html">
            
                <a href="../advanced/computer_vision.html">
            
                    
                    机器视觉
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.3.1" data-path="../tutorials/motion-capture-vicon-optitrack.html">
            
                <a href="../tutorials/motion-capture-vicon-optitrack.html">
            
                    
                    运动捕获（VICON, Optitrack）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../advanced/realsense_intel_driver.html">
            
                <a href="../advanced/realsense_intel_driver.html">
            
                    
                    安装英特尔 RealSense R200 的驱动程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../advanced/switching_state_estimators.html">
            
                <a href="../advanced/switching_state_estimators.html">
            
                    
                    切换状态估计器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../advanced/out_of_tree_modules.html">
            
                <a href="../advanced/out_of_tree_modules.html">
            
                    
                    树外模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../software_update/stm32_bootloader.html">
            
                <a href="../software_update/stm32_bootloader.html">
            
                    
                    STM32 Bootloader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../advanced/system_tunes.html">
            
                <a href="../advanced/system_tunes.html">
            
                    
                    System Tunes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../test_and_ci/">
            
                <a href="../test_and_ci/">
            
                    
                    平台测试和 CI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../test_and_ci/test_flights.html">
            
                <a href="../test_and_ci/test_flights.html">
            
                    
                    测试飞行
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../test_cards/mc_01_manual_modes.html">
            
                <a href="../test_cards/mc_01_manual_modes.html">
            
                    
                    测试 MC_01 - 手动模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="../test_cards/mc_02_full_autonomous.html">
            
                <a href="../test_cards/mc_02_full_autonomous.html">
            
                    
                    测试 MC_02-完全自主
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.3" data-path="../test_cards/mc_03_auto_manual_mix.html">
            
                <a href="../test_cards/mc_03_auto_manual_mix.html">
            
                    
                    测试 MC_03 - 自动手动混合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.4" data-path="../test_cards/mc_04_failsafe_testing.html">
            
                <a href="../test_cards/mc_04_failsafe_testing.html">
            
                    
                    测试 MC_04 -故障安全测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.5" data-path="../test_cards/mc_05_indoor_flight_manual_modes.html">
            
                <a href="../test_cards/mc_05_indoor_flight_manual_modes.html">
            
                    
                    测试 MC_05-室内飞行（手动模式）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../test_and_ci/unit_tests.html">
            
                <a href="../test_and_ci/unit_tests.html">
            
                    
                    单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../test_and_ci/continous_integration.html">
            
                <a href="../test_and_ci/continous_integration.html">
            
                    
                    持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../test_and_ci/jenkins_ci.html">
            
                <a href="../test_and_ci/jenkins_ci.html">
            
                    
                    Jenkins 持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../test_and_ci/integration_testing.html">
            
                <a href="../test_and_ci/integration_testing.html">
            
                    
                    ROS Integration Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../test_and_ci/integration_testing_mavsdk.html">
            
                <a href="../test_and_ci/integration_testing_mavsdk.html">
            
                    
                    MAVSDK Integration Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../test_and_ci/docker.html">
            
                <a href="../test_and_ci/docker.html">
            
                    
                    Docker Containers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../test_and_ci/maintenance.html">
            
                <a href="../test_and_ci/maintenance.html">
            
                    
                    Maintenance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../contribute/">
            
                <a href="../contribute/">
            
                    
                    Contribution (&Dev Call)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../contribute/dev_call.html">
            
                <a href="../contribute/dev_call.html">
            
                    
                    Dev Call
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../contribute/code.html">
            
                <a href="../contribute/code.html">
            
                    
                    Source Code Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="../contribute/git_examples.html">
            
                <a href="../contribute/git_examples.html">
            
                    
                    GIT Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../contribute/docs.html">
            
                <a href="../contribute/docs.html">
            
                    
                    Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../contribute/translation.html">
            
                <a href="../contribute/translation.html">
            
                    
                    Translation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../contribute/notation.html">
            
                <a href="../contribute/notation.html">
            
                    
                    Terminology/Notation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../contribute/licenses.html">
            
                <a href="../contribute/licenses.html">
            
                    
                    Licenses
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../contribute/support.html">
            
                <a href="../contribute/support.html">
            
                    
                    Support
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Dronecode 相关资源</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <a target="_blank" href="https://docs.px4.io/master/en/">
            
                    
                    PX4 用户指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <a target="_blank" href="https://docs.qgroundcontrol.com/en/">
            
                    
                    QGroundControl用户指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <a target="_blank" href="http://dev.qgc.dimianzhan.com/zh/">
            
                    
                    QGroundControl 开发人员指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" >
            
                <a target="_blank" href="https://mavlink.io/en/">
            
                    
                    MAVLink指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" >
            
                <a target="_blank" href="https://mavsdk.mavlink.io/develop/en/index.html">
            
                    
                    MAVSDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" >
            
                <a target="_blank" href="https://camera-manager.dronecode.org/en/">
            
                    
                    Dronecode相机管理器
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >RTPS/ROS2 Interface</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="rtpsros2-&#x63A5;&#x53E3;&#xFF1A;px4-fastrtps&#x6865;&#x63A5;"><a name="rtpsros2-&#x63A5;&#x53E3;&#xFF1A;px4-fastrtps&#x6865;&#x63A5;" class="plugin-anchor" href="#rtpsros2-&#x63A5;&#x53E3;&#xFF1A;px4-fastrtps&#x6865;&#x63A5;"><i class="fa fa-link" aria-hidden="true"></i></a>RTPS/ROS2 &#x63A5;&#x53E3;&#xFF1A;PX4-FastRTPS&#x6865;&#x63A5;</h1>
<p><em>PX4-fastRTPS &#x6865;&#x63A5;</em> &#x5728; PX4 &#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x53D1;&#x5E03;&#x8BA2;&#x9605; (RTPS) &#x63A5;&#x53E3;, &#x4ECE;&#x800C;&#x80FD;&#x591F;&#x5728;PX4&#x7EC4;&#x4EF6;&#x548C; (offboard) <em>Fast RTPS</em> &#x5E94;&#x7528;&#x7A0B;&#x5E8F; (&#x5305;&#x62EC;&#x4F7F;&#x7528; ROS2/ROS &#x6846;&#x67B6;&#x6784;&#x5EFA;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;) &#x4E4B;&#x95F4;&#x8FDB;&#x884C; <a href="uorb.html">uORB &#x6D88;&#x606F;</a> &#x4EA4;&#x6362;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p>RTPS&#x662F;&#x5BF9;&#x8C61;&#x7BA1;&#x7406;&#x7EC4; (OMG) &#x6570;&#x636E;&#x5206;&#x53D1;&#x670D;&#x52A1;(DDS) &#x6807;&#x51C6;&#x7684;&#x57FA;&#x7840;&#x534F;&#x8BAE;&#x3002; &#x5176;&#x76EE;&#x7684;&#x662F;&#x5229;&#x7528;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x5B9E;&#x73B0;&#x53EF;&#x6269;&#x5C55;&#x3001;&#x5B9E;&#x65F6;&#x3001;&#x53EF;&#x9760;&#x3001;&#x9AD8;&#x6027;&#x80FD;&#x548C;&#x53EF;&#x4E92;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x3002; <em>Fast RTPS</em> &#x662F;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;RTPS&#x534F;&#x8BAE;&#x548C;&#x6700;&#x5C0F;DDS API&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x8DE8;&#x5E73;&#x53F0;&#x5B9E;&#x73B0;&#x3002;</p>
</blockquote>
<p>RTPS &#x5DF2;&#x88AB;&#x91C7;&#x7528;&#x4E3A; ROS2 (&#x673A;&#x5668;&#x4EBA;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;) &#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002; <em>Fast RTPS&#x6865;&#x63A5; </em> &#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x5730;&#x4E0E; ROS2 &#x96C6;&#x6210;, &#x4ECE;&#x800C;&#x8F7B;&#x677E;&#x5171;&#x4EAB;&#x4F20;&#x611F;&#x5668;&#x503C;&#x3001;&#x547D;&#x4EE4;&#x548C;&#x5176;&#x4ED6;&#x8F66;&#x8F86;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x672C;&#x4E3B;&#x9898;&#x4ECB;&#x7ECD;RTPS&#x6865;&#x63A5;&#x4F53;&#x7CFB;&#x7ED3;&#x6784; (&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x5728; ROS2/ROS &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7BA1;&#x9053;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;)&#x3002; &#x8FD8;&#x6F14;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;&#x4EE3;&#x7801;, &#x4EE5;&#x4FBF;:</p>
<ol>
<li>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; <em>Fast rtps </em> &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x8BA2;&#x9605;PX4&#x6D88;&#x606F;</li>
<li>&#x5728;PX4&#x4E0A;&#x8FDE;&#x63A5;ROS2&#x8282;&#x70B9; (&#x901A;&#x8FC7;RTPS&#x6865;&#x63A5;, &#x5E76;&#x4F7F;&#x7528; <code>px4_ros_com</code> &#x5305;)</li>
<li>&#x5982;&#x679C;&#x8981;&#x5728;PX4&#x4E0A;&#x8FDE;&#x63A5;ROS (ROS &quot;1&#x4EE3;&quot;)&#xFF0C;&#x9700;&#x8981;&#x989D;&#x5916;&#x4F7F;&#x7528; <code>ros1_bridge</code> &#x5305;&#x5728;ROS2&#x548C;ROS&#x4E4B;&#x95F4;&#x505A;&#x6865;&#x63A5;&#x3002;</li>
</ol>
<h2 id="&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;-rtps&#xFF1F;"><a name="&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;-rtps&#xFF1F;" class="plugin-anchor" href="#&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;-rtps&#xFF1F;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; RTPS&#xFF1F;</h2>
<p>&#x5F53;&#x60A8;&#x9700;&#x8981;&#x5728;&#x98DE;&#x884C;&#x63A7;&#x5236;&#x5668;&#x548C;offboard&#x90E8;&#x4EF6;&#x4E4B;&#x95F4;&#x53EF;&#x9760;&#x5730;&#x5171;&#x4EAB;&#x65F6;&#x95F4;&#x654F;&#x611F;/&#x5B9E;&#x65F6;&#x4FE1;&#x606F;&#x65F6;, &#x5E94;&#x4F7F;&#x7528;RTPS&#x3002; &#x7279;&#x522B;&#x662F;, &#x5728;off-board&#x8F6F;&#x4EF6;&#x9700;&#x8981; (&#x901A;&#x8FC7;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536; uORB&#x4E3B;&#x9898;) &#x6210;&#x4E3A; px4 &#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x8F6F;&#x4EF6;&#x7EC4;&#x4EF6;&#x7684; <em>&#x4F19;&#x4F34;</em> &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B83;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p>&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#x5305;&#x62EC;&#x4E3A;&#x5B9E;&#x73B0;&#x673A;&#x5668;&#x89C6;&#x89C9;&#x4E0E;&#x673A;&#x5668;&#x4EBA;&#x5E93;&#x8FDB;&#x884C;&#x7684;&#x901A;&#x4FE1;, &#x8FD8;&#x4F7F;&#x7528;&#x5728;&#x5176;&#x5B83;&#x5BF9;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#x9AD8;&#x7684;&#x9886;&#x57DF;&#xFF0C;&#x6BD4;&#x5982;&#x5411;&#x6267;&#x884C;&#x5668;&#x53D1;&#x9001;&#x6570;&#x636E;&#x548C;&#x4ECE;&#x4F20;&#x611F;&#x5668;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x98DE;&#x673A;&#x63A7;&#x5236;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> <em>Fast RTPS</em> &#x5E76;&#x65E0;&#x53D6;&#x4EE3;MAVLink&#x4E4B;&#x610F;&#x3002; MAVLink &#x4ECD;&#x7136;&#x662F;&#x4E0E;&#x5730;&#x9762;&#x7AD9;&#x3001;&#x4E91;&#x53F0;&#x3001;&#x6444;&#x50CF;&#x673A;&#x548C;&#x5176;&#x4ED6;offboard&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#x9996;&#x9009;&#x534F;&#x8BAE; (&#x5C3D;&#x7BA1; <em>Fast rtps</em> &#x4E3A;&#x4F7F;&#x7528;&#x67D0;&#x4E9B;&#x5916;&#x8BBE;&#x63D0;&#x4F9B;&#x4E86;&#x7B2C;&#x4E8C;&#x4E2A;&#x9009;&#x62E9;)&#x3002;</p>
</blockquote>
<p><span></span></p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p>RTPS&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8F83;&#x6162;&#x7684;&#x94FE;&#x63A5; (&#x4F8B;&#x5982;&#x65E0;&#x7EBF;&#x6570;&#x4F20;), &#x4F46;&#x5E94;&#x6CE8;&#x610F;&#x4E0D;&#x8981;&#x4F7F;&#x901A;&#x9053;&#x8FC7;&#x8F7D;&#x3002;</p>
</blockquote>
<h2 id="&#x67B6;&#x6784;&#x6982;&#x8FF0;"><a name="&#x67B6;&#x6784;&#x6982;&#x8FF0;" class="plugin-anchor" href="#&#x67B6;&#x6784;&#x6982;&#x8FF0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x67B6;&#x6784;&#x6982;&#x8FF0;</h2>
<h3 id="rtps-&#x6865;&#x63A5;"><a name="rtps-&#x6865;&#x63A5;" class="plugin-anchor" href="#rtps-&#x6865;&#x63A5;"><i class="fa fa-link" aria-hidden="true"></i></a>RTPS &#x6865;&#x63A5;</h3>
<p>RTPS &#x6865;&#x63A5;&#x5728; PX4 &#x548C; RTPS &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E4B;&#x95F4;&#x4EA4;&#x6362;&#x6D88;&#x606F;, &#x5728;&#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x7684; <a href="uorb.html">uORB</a> &#x548C; RTPS &#x6D88;&#x606F;&#x4E4B;&#x95F4;&#x65E0;&#x7F1D;&#x8F6C;&#x6362;&#x3002;</p>
<p><img src="../../assets/middleware/micrortps/architecture.png" alt="basic example flow"></p>
<p>&#x8BE5;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x7684;&#x4E3B;&#x8981;&#x5143;&#x7D20;&#x662F;&#x4E0A;&#x9762;&#x56FE;&#x4E2D;&#x6240;&#x793A;&#x7684;&#x5BA2;&#x6237;&#x7AEF; (client) &#x548C;&#x4EE3;&#x7406; (agent) &#x8FDB;&#x7A0B;&#x3002;</p>
<ul>
<li><em>Client</em> &#x662F;&#x5728;&#x98DE;&#x884C;&#x63A7;&#x5236;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x7684; PX4 &#x4E2D;&#x95F4;&#x4EF6;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x3002; &#x5B83;&#x8BA2;&#x9605;&#x7531;&#x5176;&#x4ED6; PX4 &#x7EC4;&#x4EF6;&#x53D1;&#x5E03;&#x7684; uORB &#x4E3B;&#x9898;, &#x5E76;&#x5C06;&#x66F4;&#x65B0;&#x53D1;&#x9001;&#x7ED9; <em>Agent</em> (&#x901A;&#x8FC7; UART &#x6216; UDP &#x7AEF;&#x53E3;)&#x3002; &#x5B83;&#x8FD8;&#x63A5;&#x6536;&#x6765;&#x81EA; <em>Agent</em> &#x7684;&#x6D88;&#x606F;, &#x8F6C;&#x6362;&#x4E3A; PX4 &#x4E0A;&#x7684; uORB &#x6D88;&#x606F;&#x5E76;&#x91CD;&#x65B0;&#x53D1;&#x5E03;&#x3002;</li>
<li><em>Agent</em> &#x5728;Offboard&#x8BA1;&#x7B97;&#x673A;&#x4E0A;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x3002; &#x5B83;&#x76D1;&#x89C6;&#x6765;&#x81EA; <em>Client</em> &#x7684; uORB &#x6D88;&#x606F;&#x66F4;&#x65B0;, &#x5E76;&#x901A;&#x8FC7;RTPS (&#x91CD;&#x65B0;) &#x53D1;&#x5E03;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x3002; &#x5B83;&#x8FD8;&#x8BA2;&#x9605;&#x6765;&#x81EA;&#x5176;&#x4ED6; RTPS &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; &quot;uORB&quot; RTPS &#x6D88;&#x606F;, &#x5E76;&#x76F4;&#x63A5;&#x8F6C;&#x53D1;&#x7ED9; <em>Client</em>&#x3002;</li>
<li><em>Agent</em> &#x548C; <em>Client</em> &#x901A;&#x8FC7;&#x4E32;&#x884C;&#x94FE;&#x8DEF; (UART) &#x6216; UDP &#x7F51;&#x7EDC;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x3002; uORB &#x4FE1;&#x606F;&#x4E8B;&#x5148;&#x7ECF;&#x8FC7;&#x4E86; <a href="https://en.wikipedia.org/wiki/Common_Data_Representation" target="_blank">CDR &#x5E8F;&#x5217;&#x5316; </a> &#x5904;&#x7406; (<em>CDR &#x5E8F;&#x5217;&#x5316; </em> &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5728;&#x4E0D;&#x540C;&#x5E73;&#x53F0;&#x4E4B;&#x95F4;&#x4EA4;&#x6362;&#x4E32;&#x884C;&#x6570;&#x636E;&#x7684;&#x901A;&#x7528;&#x683C;&#x5F0F;)&#x3002;</li>
<li><em>Agent</em> &#x548C;&#x4EFB;&#x4F55; <em>Fast RTPS</em> &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E4B;&#x95F4;&#x90FD;&#x662F;&#x901A;&#x8FC7; UDP &#x8FDE;&#x63A5;&#x7684;, &#x4E8C;&#x8005;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x540C;&#x4E00;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x8BBE;&#x5907;&#x4E0A;&#x3002; &#x5728;&#x4E00;&#x79CD;&#x5178;&#x578B;&#x7684;&#x914D;&#x7F6E;&#x4E2D;, &#x5B83;&#x4EEC;&#x8FD0;&#x884C;&#x4E8E;&#x540C;&#x4E00;&#x7CFB;&#x7EDF; (&#x4F8B;&#x5982;, &#x5F00;&#x53D1;&#x8BA1;&#x7B97;&#x673A;&#x3001;Linux &#x914D;&#x5957;&#x8BA1;&#x7B97;&#x673A;&#x6216;&#x8BA1;&#x7B97;&#x673A;&#x677F;) &#x4E0A;, &#x901A;&#x8FC7; Wifi&#x6216; USB &#x8FDE;&#x63A5;&#x5230; <em>Client</em>&#x3002;</li>
</ul>
<h3 id="ros2ros-&#x5E94;&#x7528;&#x5904;&#x7406;&#x6D41;&#x7A0B;"><a name="ros2ros-&#x5E94;&#x7528;&#x5904;&#x7406;&#x6D41;&#x7A0B;" class="plugin-anchor" href="#ros2ros-&#x5E94;&#x7528;&#x5904;&#x7406;&#x6D41;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>ROS2/ROS &#x5E94;&#x7528;&#x5904;&#x7406;&#x6D41;&#x7A0B;</h3>
<p>ROS2 &#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6D41;&#x7A0B;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x76F4;&#x63A5;! &#x7531;&#x4E8E; ROS2 &#x539F;&#x751F;&#x652F;&#x6301; DDS/RTPS &#x4F5C;&#x4E3A;&#x5176;&#x539F;&#x751F;&#x901A;&#x4FE1;&#x4E2D;&#x95F4;&#x4EF6;, &#x56E0;&#x6B64;&#x60A8;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x521B;&#x5EFA; ROS2 &#x76D1;&#x542C;&#x6216;&#x5E7F;&#x64AD;&#x8282;&#x70B9;, &#x901A;&#x8FC7; <em>PX4 Fast RTPS &#x6865;&#x63A5;</em> &#x8BA2;&#x9605;&#x6216;&#x53D1;&#x5E03;PX4&#x4E0A;&#x7684; uORB &#x6570;&#x636E;&#x3002; &#x6B63;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x60A8;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x4EE3;&#x7406;&#x7AEF;&#xFF08;&#x4EE5;&#x53CA; ROS &#x8282;&#x70B9;&#x4E0A;&#xFF09;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x3001;&#x5934;&#x6587;&#x4EF6;&#x548C;&#x6E90;&#x6587;&#x4EF6;&#x662F;&#x4ECE;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;&#xFF08;IDL&#xFF09;&#x6587;&#x4EF6;&#x751F;&#x6210;&#x7684;&#x3002; <code>px4_ros_com</code> &#x5305;&#x63D0;&#x4F9B;&#x4E86;&#x751F;&#x6210; ROS2 &#x6240;&#x9700;&#x7684;&#x6D88;&#x606F;&#x548C;&#x5934;&#x6587;&#x4EF6;&#x6240;&#x9700;&#x7684;&#x5FC5;&#x8981;&#x5DE5;&#x5177;&#x3002;</p>
</blockquote>
<p><img src="../../assets/middleware/micrortps/architecture_ros2.png" alt="Architecture with ROS2"></p>
<p>&#x5C06; ROS &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0E; PX4 &#x96C6;&#x6210;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x3002;</p>
<p><img src="../../assets/middleware/micrortps/architecture_ros.png" alt="Architecture with ROS"></p>
<p>&#x8BF7;&#x6CE8;&#x610F; <a href="https://github.com/ros2/ros1_bridge" target="_blank">ros1_bridge</a>&#x7684;&#x4F7F;&#x7528;, &#x5B83;&#x5728; ROS2 &#x548C; ROS &#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x6D88;&#x606F;&#x6865;&#x63A5;&#x3002; &#x56E0;&#x4E3A; ROS &#x4E00;&#x4EE3;&#x4E0D;&#x652F;&#x6301; RTPS&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x8FD9;&#x6837;&#x505A;&#x3002;</p>
<h2 id="&#x4EE3;&#x7801;&#x751F;&#x6210;"><a name="&#x4EE3;&#x7801;&#x751F;&#x6210;" class="plugin-anchor" href="#&#x4EE3;&#x7801;&#x751F;&#x6210;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4EE3;&#x7801;&#x751F;&#x6210;</h2>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> <a href="../setup/fast-rtps-installation.html">Fast RTPS 1.8.2 and FastRTPSGen 1.0.4 or later must be installed</a> in order to generate the required code!</p>
</blockquote>
<h3 id="&#x72EC;&#x7ACB;&#x4E8E;-ros-&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;"><a name="&#x72EC;&#x7ACB;&#x4E8E;-ros-&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;" class="plugin-anchor" href="#&#x72EC;&#x7ACB;&#x4E8E;-ros-&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x72EC;&#x7ACB;&#x4E8E; ROS &#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;</h3>
<p>All the code needed to create, build and use the bridge is automatically generated when PX4-Autopilot is compiled.</p>
<p><em>Client</em> &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E5F;&#x88AB;&#x7F16;&#x8BD1;&#x6210;&#x4E3A;&#x56FA;&#x4EF6;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x8FD9;&#x662F;&#x6807;&#x51C6;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002; &#x4F46;&#x662F;<em>Agent</em> &#x5FC5;&#x987B;&#x4E3A;&#x76EE;&#x6807;&#x673A;&#x5355;&#x72EC;/&#x624B;&#x52A8;&#x7F16;&#x8BD1;&#x3002;</p>
<p><span></span></p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> &#x6865;&#x63A5;&#x7684;&#x4EE3;&#x7801;&#x4E5F;&#x53EF;&#x4EE5; <a href="micrortps_manual_code_generation.html">&#x624B;&#x52A8;&#x751F;&#x6210;</a>&#x3002; &#x5927;&#x591A;&#x6570;&#x7528;&#x6237;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x6837;&#x505A;, &#x4F46;&#x94FE;&#x63A5;&#x7684;&#x4E3B;&#x9898;&#x63D0;&#x4F9B;&#x4E86;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x7684;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x63CF;&#x8FF0;, &#x6392;&#x6545;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x8BB8;&#x6709;&#x7528;&#x3002;</p>
</blockquote>
<h3 id="px4_ros_com"><a name="px4_ros_com" class="plugin-anchor" href="#px4_ros_com"><i class="fa fa-link" aria-hidden="true"></i></a>ROS2/ROS &#x5E94;&#x7528; </h3>
<p>&#x5B8C;&#x6210;&#x7F16;&#x8BD1;&#x7684; <a href="https://github.com/PX4/px4_ros_com" target="_blank">px4_ros_com</a> &#x5305;&#x53EF;&#x4EE5;&#x751F;&#x6210;&#x4ECE;&#x4E00;&#x4E2A;ROS2&#x8282;&#x70B9;&#x83B7;&#x53D6; PX4 uORB&#x6D88;&#x606F;&#x6240;&#x9700;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6; (&#x5982;&#x679C;&#x4F7F;&#x7528; ROS&#x4E00;&#x4EE3;&#xFF0C;&#x8FD8;&#x9700;&#x8981; <a href="https://github.com/ros2/ros1_bridge" target="_blank">ros1_bridge</a>)&#x3002; This includes all the required components of the <em>PX4 RTPS bridge</em>, including the <code>micrortps_agent</code> and the IDL files (required by the <code>micrortps_agent</code>).</p>
<p>The ROS and ROS2 message definition headers and interfaces are generated from the <a href="https://github.com/PX4/px4_msgs" target="_blank">px4_msgs</a> package, which match the uORB messages counterparts under PX4-Autopilot. These are required by <code>px4_ros_com</code> when generating the IDL files to be used by the <code>micrortps_agent</code>.</p>
<p>Both <code>px4_ros_com</code> and <code>px4_msgs</code> packages have two separate branches:</p>
<ul>
<li>&#x4E00;&#x4E2A;&#x652F;&#x6301; ROS2 &#x7684; <code>master</code> &#x5206;&#x652F;&#x3002; &#x8BE5;&#x5206;&#x652F;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x751F;&#x6210;&#x5728; PX4 &#x548C; ROS2 &#x4E4B;&#x95F4;&#x6865;&#x63A5;&#x5FC5;&#x9700;&#x7684;&#x6240;&#x6709; ROS2 &#x6D88;&#x606F;&#x548C; IDL &#x6587;&#x4EF6;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x652F;&#x6301; ROS &#x4E00;&#x4EE3;&#x7684; <code>ros1</code> &#x5206;&#x652F;&#x3002; &#x8BE5;&#x5206;&#x652F;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x751F;&#x6210; ROS &#x6D88;&#x606F;&#x7684;&#x5934;&#x6587;&#x4EF6;&#x548C;&#x6E90;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x4E0E; <code>ros1_bridge</code> <em>&#x4E00;&#x8D77;</em> &#x4F7F;&#x7528;&#xFF0C;&#x8FBE;&#x5230;&#x5728;PX4&#x4E0E;ROS&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x7684;&#x76EE;&#x7684;&#x3002;</li>
</ul>
<p>Both branches in <code>px4_ros_com</code> additionally include some example listener and advertiser example nodes.</p>
<h2 id="&#x652F;&#x6301;&#x7684;-uorb-&#x6D88;&#x606F;"><a name="&#x652F;&#x6301;&#x7684;-uorb-&#x6D88;&#x606F;" class="plugin-anchor" href="#&#x652F;&#x6301;&#x7684;-uorb-&#x6D88;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x652F;&#x6301;&#x7684; uORB &#x6D88;&#x606F;</h2>
<p>The generated bridge code will enable a specified subset of uORB topics to be published/subscribed via RTPS. This is true for both ROS or non-ROS applications.</p>
<p>For <em>automatic code generation</em> there&apos;s a <em>yaml</em> definition file in the PX4 <strong>PX4-Autopilot/msg/tools/</strong> directory called <strong>uorb_rtps_message_ids.yaml</strong>. This file defines the set of uORB messages to be used with RTPS, whether the messages are to be sent, received or both, and the RTPS ID for the message to be used in DDS/RTPS middleware.</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x6240;&#x6709;&#x6D88;&#x606F;&#x90FD;&#x5FC5;&#x987B;&#x5206;&#x914D;&#x4E00;&#x4E2A; RTPS ID &#x3002;</p>
</blockquote>
<pre><code class="lang-yaml"><span class="hljs-attr">rtps:</span>
<span class="hljs-attr">  - msg:</span> actuator_armed
<span class="hljs-attr">    id:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">  - msg:</span> actuator_control
<span class="hljs-attr">    id:</span> <span class="hljs-number">1</span>
<span class="hljs-bullet">  -</span> ...
<span class="hljs-attr">  - msg:</span> airspeed
<span class="hljs-attr">    id:</span> <span class="hljs-number">5</span>
<span class="hljs-attr">    send:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">  - msg:</span> battery_status
<span class="hljs-attr">    id:</span> <span class="hljs-number">6</span>
<span class="hljs-attr">    send:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">  - msg:</span> camera_capture
<span class="hljs-attr">    id:</span> <span class="hljs-number">7</span>
<span class="hljs-attr">  - msg:</span> camera_trigger
<span class="hljs-attr">    id:</span> <span class="hljs-number">8</span>
<span class="hljs-attr">    receive:</span> <span class="hljs-literal">true</span>
<span class="hljs-bullet">  -</span> ...
<span class="hljs-attr">  - msg:</span> sensor_baro
<span class="hljs-attr">    id:</span> <span class="hljs-number">63</span>
<span class="hljs-attr">    receive:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">    send:</span> <span class="hljs-literal">true</span>
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> An API change in ROS2 Dashing means that we now use the <code>rosidl_generate_interfaces()</code> CMake module (in <code>px4_msgs</code>) to generate the IDL files that we require for microRTPS agent generation (in <code>px4_ros_com</code>). PX4-Autopilot includes a template for the IDL file generation, which is only used during the PX4 build process.</p>
<p>The <code>px4_msgs</code> build generates <em>slightly different</em> IDL files for use with ROS2/ROS (than are built for PX4 firmware). <strong>uorb_rtps_message_ids.yaml</strong> &#x6587;&#x4EF6;&#x5C06;&#x6D88;&#x606F;&#x6539;&#x540D;&#x4F7F;&#x4E4B;&#x7B26;&#x5408;<em>PascalCased</em>&#x6807;&#x51C6; (&#x6539;&#x540D;&#x8FD9;&#x4E8B;&#x513F;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;-&#x4EE3;&#x7406;&#x7AEF;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5173;&#x7CFB;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E; ROS2 &#x662F;&#x81F3;&#x5173;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x56E0;&#x4E3A; ROS2 &#x7684;&#x6D88;&#x606F;&#x547D;&#x540D;&#x5FC5;&#x987B;&#x7B26;&#x5408; PascalCase &#x7EA6;&#x5B9A;)&#x3002; &#x65B0;&#x7684;IDL&#x6587;&#x4EF6;&#x8FD8;&#x53CD;&#x8F6C;&#x4E86;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;/&#x63A5;&#x6536;&#x72B6;&#x6001; (&#x8FD9;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x53D1;&#x9001;&#xFF0C;&#x5728;&#x4EE3;&#x7406;&#x7AEF;&#x7684;&#x72B6;&#x6001;&#x5C31;&#x662F;&#x63A5;&#x6536;&#xFF0C;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;)&#x3002;</p>
</blockquote>
<h2 id="client_firmware"><a name="client_firmware" class="plugin-anchor" href="#client_firmware"><i class="fa fa-link" aria-hidden="true"></i></a>Client (PX4/PX4-Autopilot) </h2>
<p>The <em>Client</em> source code is generated, compiled and built into the PX4 firmware as part of the normal build process.</p>
<p>To build the firmware for NuttX/Pixhawk flight controllers use the <code>_rtps</code> feature in the configuration target. For example, to build RTPS for px4_fmu-v4:</p>
<pre><code class="lang-sh">make px4_fmu-v4_rtps
</code></pre>
<p>To build the firmware for a SITL target:</p>
<pre><code class="lang-sh">make px4_sitl_rtps
</code></pre>
<p>The <em>Client</em> application can be launched from <a href="../debug/system_console.html">NuttShell/System Console</a>. The command syntax is shown below (you can specify a variable number of arguments):</p>
<pre><code class="lang-sh">&gt; micrortps_client start|stop|status [options]
  -t &lt;transport&gt;          [UART|UDP] Default UART
  <span class="hljs-_">-d</span> &lt;device&gt;             UART device. Default /dev/ttyACM0
  <span class="hljs-_">-l</span> &lt;loops&gt;              How many iterations will this program have. -1 <span class="hljs-keyword">for</span> infinite. Default -1.
  -w &lt;sleep_time_ms&gt;      Time <span class="hljs-keyword">in</span> ms <span class="hljs-keyword">for</span> <span class="hljs-built_in">which</span> each iteration sleep. Default 1ms
  -b &lt;baudrate&gt;           UART device baudrate. Default 460800
  -p &lt;poll_ms&gt;            Time <span class="hljs-keyword">in</span> ms to poll over UART. Default 1ms
  -r &lt;reception port&gt;     UDP port <span class="hljs-keyword">for</span> receiving. Default 2019
  <span class="hljs-_">-s</span> &lt;sending port&gt;       UDP port <span class="hljs-keyword">for</span> sending. Default 2020
  -i &lt;ip_address&gt;         Select IP address (remote) values: &lt;x.x.x.x&gt;. Default: 127.0.0.1
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;<em>Client</em> &#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;, &#x4F46;&#x60A8;&#x9700;&#x8981;&#x624B;&#x52A8;&#x542F;&#x52A8;&#x5B83;&#x3002; PX4 &#x56FA;&#x4EF6;&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7801;&#x5C06;&#x6765;&#x53EF;&#x80FD;&#x4F1A;&#x81EA;&#x52A8;&#x542F;&#x52A8; <em>Client</em> &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6C38;&#x4E45;&#x7684;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x3002;</p>
</blockquote>
<p>For example, in order to run the <em>Client</em> daemon with SITL connecting to the Agent via UDP, start the daemon as shown:</p>
<pre><code class="lang-sh">micrortps_client start -t UDP
</code></pre>
<h2 id="&#x4E0E;-ros-&#x65E0;&#x5173;&#x7684;-offboard-fast-rtps-&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x4EE3;&#x7406;&#x7AEF;"><a name="&#x4E0E;-ros-&#x65E0;&#x5173;&#x7684;-offboard-fast-rtps-&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x4EE3;&#x7406;&#x7AEF;" class="plugin-anchor" href="#&#x4E0E;-ros-&#x65E0;&#x5173;&#x7684;-offboard-fast-rtps-&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x4EE3;&#x7406;&#x7AEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E0E; ROS &#x65E0;&#x5173;&#x7684; Offboard Fast RTPS &#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x4EE3;&#x7406;&#x7AEF;</h2>
<p>The <em>Agent</em> code is automatically <em>generated</em> when you build the associated PX4 firmware. You can find the source here: <strong>build/<target-platform>/src/modules/micrortps_bridge/micrortps_client/micrortps_agent/</target-platform></strong>.</p>
<p>To build the <em>Agent</em> application, compile the code:</p>
<pre><code class="lang-sh"><span class="hljs-built_in">cd</span> build/&lt;target-platform&gt;/src/modules/micrortps_bridge/micrortps_client/micrortps_agent
mkdir build &amp;&amp; <span class="hljs-built_in">cd</span> build
cmake ..
make
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x5982;&#x679C;&#x8981;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1; <em>Qualcomm Snapdragon Flight</em> &#x5E73;&#x53F0;&#xFF0C;&#x8BF7;&#x53C2;&#x8003; <a href="https://github.com/eProsima/PX4-FastRTPS-PoC-Snapdragon-UDP#how-to-use" target="_blank">&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;</a>&#x3002;</p>
</blockquote>
<p>The command syntax for the <em>Agent</em> is listed below:</p>
<pre><code class="lang-sh">$ ./micrortps_agent [options]
  -t &amp;lt;transport&amp;gt;          [UART|UDP] &#x7F3A;&#x7701;&#x4E3A;UART.
  <span class="hljs-_">-d</span> &amp;lt;device&amp;gt;             UART&#x8BBE;&#x5907;&#xFF0C; &#x7F3A;&#x7701;&#x4E3A; /dev/ttyACM0&#x3002;
  -w &amp;lt;sleep_time_us&amp;gt;      &#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x7684;&#x4F11;&#x7720;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;us&#x3002; &#x9ED8;&#x8BA4; 1ms&#x3002;
  -b &amp;lt;baudrate&amp;gt;           UART&#x8BBE;&#x5907;&#x6CE2;&#x7279;&#x7387;&#x3002; &#x9ED8;&#x8BA4; 460800&#x3002;
  -p &amp;lt;poll_ms&amp;gt;            UART&#x8BBE;&#x5907;&#x8F6E;&#x8BE2;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;ms&#xFF0C; &#x7F3A;&#x7701;&#x4E3A; 1ms&#x3002;
  -r &amp;lt;reception port&amp;gt;     UDP &#x63A5;&#x6536;&#x7AEF;&#x53E3;&#xFF0C; &#x7F3A;&#x7701;&#x4E3A; 2019&#x3002;
  <span class="hljs-_">-s</span> &amp;lt;sending port&amp;gt;       UDP&#x53D1;&#x9001;&#x7AEF;&#x53E3;&#xFF0C; &#x7F3A;&#x7701;&#x4E3A; 2020&#x3002;
</code></pre>
<p>To launch the <em>Agent</em>, run <code>micrortps_agent</code> with appropriate options for specifying the connection to the <em>Client</em> (the default options connect from a Linux device to the <em>Client</em> over a UART port).</p>
<p>As an example, to start the <em>micrortps_agent</em> with connection through UDP, issue:</p>
<pre><code class="lang-sh">./micrortps_agent -t UDP
</code></pre>
<h2 id="&#x9762;&#x5411;-ros2-&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x4EE3;&#x7406;&#x7AEF;&#x63A5;&#x53E3;"><a name="&#x9762;&#x5411;-ros2-&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x4EE3;&#x7406;&#x7AEF;&#x63A5;&#x53E3;" class="plugin-anchor" href="#&#x9762;&#x5411;-ros2-&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x4EE3;&#x7406;&#x7AEF;&#x63A5;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x9762;&#x5411; ROS2 &#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x4EE3;&#x7406;&#x7AEF;&#x63A5;&#x53E3;</h2>
<p>Building <code>px4_ros_com</code> automatically generates and builds the agent application, though it requires (as a dependency), that the <code>px4_msgs</code> package also gets build on the same ROS2 workspace (or overlaid from another ROS2 workspace). Since it is also installed using the <a href="http://design.ros2.org/articles/build_tool.html" target="_blank"><code>colcon</code></a> build tools, running it works exactly the same way as the above. Check the <strong>Building the <code>px4_ros_com</code> package</strong> for details about the build structure.</p>
<h2 id="building-the-px4roscom-and-px4msgs-package"><a name="building-the-px4roscom-and-px4msgs-package" class="plugin-anchor" href="#building-the-px4roscom-and-px4msgs-package"><i class="fa fa-link" aria-hidden="true"></i></a>Building the <code>px4_ros_com</code> and <code>px4_msgs</code> package</h2>
<p>Install and setup both ROS2 and ROS environments on your development machine and separately clone the <code>px4_ros_com</code> and <code>px4_msgs</code> repo for both the <code>master</code> and <code>ros1</code> branches (see <a href="#px4_ros_com">above for more information</a>).</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> ROS2&#x53EA;&#x9700;&#x8981;master&#x5206;&#x652F; (&#x4F46;ROS&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x90FD;&#x9700;&#x8981;)&#x3002;</p>
</blockquote>
<h3 id="&#x5206;&#x522B;&#x5B89;&#x88C5;-ros-&#x548C;-ros2"><a name="&#x5206;&#x522B;&#x5B89;&#x88C5;-ros-&#x548C;-ros2" class="plugin-anchor" href="#&#x5206;&#x522B;&#x5B89;&#x88C5;-ros-&#x548C;-ros2"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5206;&#x522B;&#x5B89;&#x88C5; ROS &#x548C; ROS2</h3>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> This install and build guide covers ROS Melodic and ROS2 Dashing (ROS2 Ardent, Bouncy or Crystal are not covered as they are EOL).</p>
</blockquote>
<p>In order to install ROS Melodic and ROS2 Dashing (officially supported) on a Ubuntu 18.04 machine, follow the links below, respectively:</p>
<ol>
<li><a href="http://wiki.ros.org/melodic/Installation/Ubuntu" target="_blank">&#x5B89;&#x88C5; ROS Melodic</a></li>
<li><a href="https://index.ros.org/doc/ros2/Installation/Dashing/Linux-Install-Debians/" target="_blank">Install ROS2 Dashing</a></li>
<li><p>The install process should also install the <em>colcon</em> build tools, but in case that doesn&apos;t happen, you can install the tools manually:</p>
<pre><code class="lang-sh"> sudo apt install python3-colcon-common-extensions
</code></pre>
</li>
<li><p><em>eigen3_cmake_module</em> is also required, since Eigen3 is used on the transforms library:</p>
<pre><code class="lang-sh"> sudo apt install ros-dashing-eigen3-cmake-module
</code></pre>
</li>
<li><p><em>setuptools</em> must also be installed (using <em>pip</em> or <em>apt</em>):</p>
<pre><code class="lang-sh"> sudo pip3 install -U setuptools
</code></pre>
<blockquote class="clearfix alert alert-warning"><strong class="fa fa-2x fa-exclamation-triangle"></strong>
<p> Do not install the <code>ros1_bridge</code> package through the deb repository. The package must be built from source.</p>
</blockquote>
</li>
</ol>
<h3 id="&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><a name="&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;" class="plugin-anchor" href="#&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;</h3>
<p>Since the ROS2 and ROS require different environments you will need a separate workspace for each ROS version. As an example:</p>
<ol>
<li><p>&#x5BF9;&#x4E8E; ROS2, &#x5982;&#x4E0B;&#x521B;&#x5EFA;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;:</p>
<pre><code class="lang-sh"> mkdir -p ~/px4_ros_com_ros2/src
</code></pre>
<p> &#x7136;&#x540E;&#xFF0C;&#x628A; ROS2 (<code>master</code>) &#x5206;&#x652F;&#x514B;&#x9686;&#x5230; <code>/src</code> &#x76EE;&#x5F55;:</p>
<pre><code class="lang-sh"> $ git <span class="hljs-built_in">clone</span> https://github.com/PX4/px4_ros_com.git ~/px4_ros_com_ros2/src/px4_ros_com <span class="hljs-comment"># clones the master branch</span>
 $ git <span class="hljs-built_in">clone</span> https://github.com/PX4/px4_msgs.git ~/px4_ros_com_ros2/src/px4_msgs
</code></pre>
</li>
<li><p>&#x5BF9;&#x4E8E; ROS, &#x9075;&#x5FAA;&#x540C;&#x6837;&#x7684;&#x6D41;&#x7A0B;, &#x4F46;&#x662F;&#x8981;&#x53E6;&#x5EFA;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x5E76;&#x514B;&#x9686;&#x53E6;&#x4E00;&#x4E2A;&#x5206;&#x652F;:</p>
<pre><code class="lang-sh"> mkdir -p ~/px4_ros_com_ros1/src
</code></pre>
<p> &#x7136;&#x540E;&#xFF0C;&#x514B;&#x9686; ROS2 (<code>ros1</code>) &#x5206;&#x652F;&#x5230; <code>/src</code> &#x76EE;&#x5F55;:</p>
<pre><code class="lang-sh"> $ git <span class="hljs-built_in">clone</span> https://github.com/PX4/px4_ros_com.git ~/px4_ros_com_ros1/src/px4_ros_com -b ros1 <span class="hljs-comment"># clones the &apos;ros1&apos; branch</span>
 $ git <span class="hljs-built_in">clone</span> https://github.com/PX4/px4_msgs.git ~/px4_ros_com_ros1/src/px4_msgs -b ros1
</code></pre>
</li>
</ol>
<h3 id="&#x6784;&#x5EFA;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><a name="&#x6784;&#x5EFA;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;" class="plugin-anchor" href="#&#x6784;&#x5EFA;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x5EFA;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;</h3>
<p>The directory <code>px4_ros_com/scripts</code> contains multiple scripts that can be used to build both workspaces.</p>
<p>To build both workspaces with a single script, use the <code>build_all.bash</code>. Check the usage with <code>source build_all.bash --help</code>. The most common way of using it is by passing the ROS(1) workspace directory path and also the PX4-Autopilot directory path:</p>
<pre><code class="lang-sh">$ <span class="hljs-built_in">source</span> build_all.bash --ros1_ws_dir &lt;path/to/px4_ros_com_ros1/ws&gt;
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> Using the <code>--verbose</code> argument will allow you to see the full <em>colcon</em> build output.</p>
<p><strong>Note</strong> The build process will open new tabs on the console, corresponding to different stages of the build process that need to have different environment configurations sourced.</p>
</blockquote>
<p>One can also use the following individual scripts in order to build the individual parts:</p>
<ul>
<li><code>build_ros1_bridge.bash</code> &#x53EF;&#x4EE5;&#x6784;&#x5EFA; <code>ros1_bridge</code>;</li>
<li><code>build_ros1_workspace.bash</code> (only on the <code>ros1</code> branch of <code>px4_ros_com</code>), to build the ROS1 workspace to where the <code>px4_ros_com</code> and <code>px4_msgs</code> <code>ros1</code> branches were cloned;</li>
<li><code>build_ros2_workspace.bash</code>, to build the ROS2 workspace to where the <code>px4_ros_com</code> and <code>px4_msgs</code> <code>master</code> branches were cloned;</li>
</ul>
<p>The steps below show how to <em>manually</em> build the packages (provided for your information/better understanding only):</p>
<ol>
<li><p><code>cd</code> &#x5230; <code>px4_ros_com_ros2</code> &#x76EE;&#x5F55;&#x5E76; source &#x4E00;&#x4E0B; ROS2 &#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002; &#x4E0D;&#x7528;&#x7BA1;&#x662F;&#x5426;&#x63D0;&#x793A;&#x60A8;&#x8BE5;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;&#x8FC7;&#xFF1A;</p>
<pre><code class="lang-sh"> <span class="hljs-built_in">source</span> /opt/ros/dashing/setup.bash
</code></pre>
</li>
<li><p>&#x514B;&#x9686; <code>ros1_bridge</code> &#x7A0B;&#x5E8F;&#x5305;&#x5230; ROS2 &#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;:</p>
<pre><code class="lang-sh"> git <span class="hljs-built_in">clone</span> https://github.com/ros2/ros1_bridge.git -b dashing ~/px4_ros_com_ros2/src/ros1_bridge
</code></pre>
</li>
<li><p>Build the <code>px4_ros_com</code> and <code>px4_msgs</code> packages, excluding the <code>ros1_bridge</code> package:</p>
<pre><code class="lang-sh"> colcon build --symlink-install --packages-skip ros1_bridge --event-handlers console_direct+
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> <code>--event-handlers console_direct+</code> &#x53C2;&#x6570;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x8BA9; <code>colcon</code> &#x5C06;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981; &quot;&#x5B89;&#x9759;&#x7684;&quot; &#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x6389;&#x8BE5;&#x53C2;&#x6570;&#x3002;</p>
</blockquote>
</li>
<li><p>&#x7136;&#x540E;&#xFF0C;&#x6309;&#x7167; ROS(1) &#x7A0B;&#x5E8F;&#x5305;&#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x3002; For that, one requires to open a new terminal window and source the ROS(1) environment that has installed on the system:</p>
<pre><code class="lang-sh"> <span class="hljs-built_in">source</span> /opt/ros/melodic/setup.bash
</code></pre>
</li>
<li><p>On the terminal of the previous step, build the <code>px4_ros_com</code> and <code>px4_msgs</code> packages on the ROS end:</p>
<pre><code class="lang-sh"> <span class="hljs-built_in">cd</span> ~/px4_ros_com_ros1 &amp;&amp; colcon build --symlink-install --event-handlers console_direct+
</code></pre>
</li>
<li><p>Before building the <code>ros1_bridge</code>, one needs to open a new terminal and then source the environments and workspaces following the order below:</p>
<pre><code class="lang-sh"> <span class="hljs-built_in">source</span> ~/px4_ros_com_ros1/install/setup.bash
 <span class="hljs-built_in">source</span> ~/px4_ros_com_ros2/install/setup.bash
</code></pre>
</li>
<li><p>&#x6700;&#x540E;&#xFF0C;&#x7F16;&#x8BD1; <code>ros1_bridge</code>&#x3002; &#x8BF7;&#x6CE8;&#x610F;, &#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x53EF;&#x80FD;&#x4F1A;&#x5360;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x3002; &#x5728;&#x5185;&#x5B58;&#x8F83;&#x5C0F;&#x7684;&#x673A;&#x5668;&#x4E0A;, &#x51CF;&#x5C11;&#x5E76;&#x884C;&#x7F16;&#x8BD1;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x76EE; (&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>MAKEFLAGS=-j1</code>)&#x3002; &#x8981;&#x67E5;&#x770B;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x7684;&#x66F4;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65; <a href="https://github.com/ros2/ros1_bridge" target="_blank">ros1_bridge</a>&#x7A0B;&#x5E8F;&#x5305;&#x7684;&#x7F51;&#x9875;&#x3002;</p>
<pre><code class="lang-sh"> <span class="hljs-built_in">cd</span> ~/px4_ros_com_ros2 &amp;&amp; colcon build --symlink-install --packages-select ros1_bridge --cmake-force-configure --event-handlers console_direct+
</code></pre>
</li>
</ol>
<h3 id="&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><a name="&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;" class="plugin-anchor" href="#&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;</h3>
<p>After building the workspaces there are many files that must be deleted before you can do a clean/fresh build (for example, after you have changed some code and want to rebuild). Unfortunately <em>colcon</em> does not currently have a way of cleaning the generated <strong>build</strong>, <strong>install</strong> and <strong>log</strong> directories, so these directories must be deleted manually.</p>
<p>The <strong>clean_all.bash</strong> script (in <strong>px4_ros_com/scripts</strong>) is provided to ease this cleaning process. The most common way of using it is by passing it the ROS(1) workspace directory path (since it&apos;s usually not on the default path):</p>
<pre><code class="lang-sh">$ <span class="hljs-built_in">source</span> clean_all.bash --ros1_ws_dir &amp;lt;path/to/px4_ros_com_ros1/ws&amp;gt;
</code></pre>
<h2 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-fast-rtps-&#x76D1;&#x542C;&#x5E94;&#x7528;"><a name="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-fast-rtps-&#x76D1;&#x542C;&#x5E94;&#x7528;" class="plugin-anchor" href="#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-fast-rtps-&#x76D1;&#x542C;&#x5E94;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Fast RTPS &#x76D1;&#x542C;&#x5E94;&#x7528;</h2>
<p>&#x4E00;&#x65E6; <em>Client</em> (&#x5728;&#x98DE;&#x884C;&#x63A7;&#x5236;&#x5668;&#x4E0A;) &#x548C; <em>Agent</em> (&#x5728;&#x4E00;&#x53F0; offboard &#x8BA1;&#x7B97;&#x673A;&#x4E0A;) &#x540C;&#x65F6;&#x8FD0;&#x884C;&#x5E76;&#x4E14;&#x6210;&#x529F;&#x4E92;&#x8054;, <em>Fast RTPS</em> &#x5E94;&#x7528;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; RTPS &#x53D1;&#x5E03;&#x6216;&#x8BA2;&#x9605;PX4 &#x4E0A;&#x7684; uORB &#x6D88;&#x606F;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x6F14;&#x793A;&#x4E86;&#x600E;&#x6837;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8BA2;&#x9605;&#x4E86; <code>sensor_combined</code> &#x4E3B;&#x9898;&#x5E76;&#x6253;&#x5370; (&#x6765;&#x81EA;PX4) &#x7684;&#x6D88;&#x606F;&#x66F4;&#x65B0;&#x7684; <em>Fast RTPS</em> &quot;&#x76D1;&#x542C;&quot; &#x5E94;&#x7528;&#x3002; &#x4E00;&#x4E2A;&#x5DF2;&#x8FDE;&#x63A5;&#x7684; RTPS &#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x4E0E; <em>Agent</em> &#x540C;&#x4E00;&#x7F51;&#x6BB5;&#x7684;&#x4EFB;&#x4F55;&#x8BA1;&#x7B97;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x3002; &#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D; <em>Agent</em> and <em>&#x76D1;&#x542C;&#x5E94;&#x7528;</em> &#x5728;&#x540C;&#x4E00;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x3002;</p>
<p><em>fastrtpsgen</em> &#x811A;&#x672C;&#x53EF;&#x4EE5;&#x4ECE; IDL &#x6D88;&#x606F;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; RTPS &#x5E94;&#x7528;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> RTPS messages are defined in IDL files and compiled to C++ using <em>fastrtpsgen</em>. As part of building the bridge code, IDL files are generated for the uORB message files that may be sent/received (see <strong>build/BUILDPLATFORM/src/modules/micrortps_bridge/micrortps_agent/idl/*.idl</strong>). These IDL files are needed when you create a <em>Fast RTPS</em> application to communicate with PX4.</p>
</blockquote>
<p>&#x8F93;&#x5165;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x521B;&#x5EFA;&#x5E94;&#x7528;&#xFF1A;</p>
<pre><code class="lang-sh"><span class="hljs-built_in">cd</span> /path/to/PX4/PX4-Autopilot/build/px4_sitl_rtps/src/modules/micrortps_bridge
mkdir micrortps_listener
<span class="hljs-built_in">cd</span> micrortps_listener
fastrtpsgen -example x64Linux2.6gcc ../micrortps_client/micrortps_agent/idl/sensor_combined.idl
</code></pre>
<p>&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x8BA2;&#x9605;&#x5668;&#x548C;&#x5E7F;&#x64AD;&#x5668;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x5B83;&#x4EEC;&#x7684;&#x4E3B;&#x7A0B;&#x5E8F;&#x3002; &#x8981;&#x6253;&#x5370;&#x6765;&#x81EA; <code>sensor_combined</code> &#x4E3B;&#x9898;&#x7684;&#x6570;&#x636E;, &#x4FEE;&#x6539; <strong>sensor_combined_Subscriber.cxx</strong> &#x6587;&#x4EF6;&#x4E2D;&#x7684; <code>onNewDataMessage()</code> &#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">void</span> sensor_combined_Subscriber::SubListener::onNewDataMessage(Subscriber* sub)
{
    <span class="hljs-comment">// Take data</span>
    sensor_combined_ st;

    <span class="hljs-keyword">if</span>(sub-&gt;takeNextData(&amp;st, &amp;m_info))
    {
        <span class="hljs-keyword">if</span>(m_info.sampleKind == ALIVE)
        {
            <span class="hljs-comment">// Print your structure data here.</span>
            ++n_msg;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\n\n\n\n\n\n\n\n\n\n&quot;</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Sample received, count=&quot;</span> &lt;&lt; n_msg &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;=============================&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;gyro_rad: &quot;</span> &lt;&lt; st.gyro_rad().at(<span class="hljs-number">0</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.gyro_rad().at(<span class="hljs-number">1</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.gyro_rad().at(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;gyro_integral_dt: &quot;</span> &lt;&lt; st.gyro_integral_dt() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;accelerometer_timestamp_relative: &quot;</span> &lt;&lt; st.accelerometer_timestamp_relative() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;accelerometer_m_s2: &quot;</span> &lt;&lt; st.accelerometer_m_s2().at(<span class="hljs-number">0</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.accelerometer_m_s2().at(<span class="hljs-number">1</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.accelerometer_m_s2().at(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;accelerometer_integral_dt: &quot;</span> &lt;&lt; st.accelerometer_integral_dt() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;magnetometer_timestamp_relative: &quot;</span> &lt;&lt; st.magnetometer_timestamp_relative() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;magnetometer_ga: &quot;</span> &lt;&lt; st.magnetometer_ga().at(<span class="hljs-number">0</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.magnetometer_ga().at(<span class="hljs-number">1</span>);
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; st.magnetometer_ga().at(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;baro_timestamp_relative: &quot;</span> &lt;&lt; st.baro_timestamp_relative() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;baro_alt_meter: &quot;</span> &lt;&lt; st.baro_alt_meter() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;baro_temp_celcius: &quot;</span> &lt;&lt; st.baro_temp_celcius() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;

        }
    }
}
</code></pre>
<p>&#x8981;&#x5728;Linux&#x4E0A;&#x6784;&#x5EFA;&#x5E76;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#xFF1A;</p>
<pre><code class="lang-sh">make <span class="hljs-_">-f</span> makefile_x64Linux2.6gcc
bin/*/sensor_combined_PublisherSubscriber subscriber
</code></pre>
<p>&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6253;&#x5370;&#x51FA;&#x7684;&#x4F20;&#x611F;&#x5668;&#x4FE1;&#x606F;&#xFF1A;</p>
<pre><code class="lang-sh">Sample received, count=10119
Received sensor_combined data
=============================
gyro_rad: -0.0103228, 0.0140477, 0.000319406
gyro_integral_dt: 0.004
accelerometer_timestamp_relative: 0
accelerometer_m_s2: -2.82708, -6.34799, -7.41101
accelerometer_integral_dt: 0.004
magnetometer_timestamp_relative: -10210
magnetometer_ga: 0.60171, 0.0405879, -0.040995
baro_timestamp_relative: -17469
baro_alt_meter: 368.647
baro_temp_celcius: 43.93
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> If the <em>Listener application</em> does not print anything, make sure the <em>Client</em> is running.</p>
</blockquote>
<h2 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-ros2-&#x76D1;&#x542C;&#x5668;"><a name="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-ros2-&#x76D1;&#x542C;&#x5668;" class="plugin-anchor" href="#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;-ros2-&#x76D1;&#x542C;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521B;&#x5EFA;&#x4E00;&#x4E2A; ROS2 &#x76D1;&#x542C;&#x5668;</h2>
<p>With the <code>px4_ros_com</code> built successfully, one can now take advantage of the generated <em>micro-RTPS</em> agent app and also from the generated sources and headers of the ROS2 msgs from <code>px4_msgs</code>, which represent a one-to-one matching with the uORB counterparts.</p>
<p>&#x8981;&#x5728; ROS2 &#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x5668;, &#x8BA9;&#x6211;&#x4EEC;&#x4EE5; <code>sensor_combined_listener.cpp</code> node under <code>px4_ros_com/src/listeners</code> &#x4F5C;&#x4E3A;&#x4E3E;&#x4F8B;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;rclcpp/rclcpp.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;px4_msgs/msg/sensor_combined.hpp&gt;</span></span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x5C06;&#x4E0E;ROS2&#x4E2D;&#x95F4;&#x4EF6;&#x4EA4;&#x4E92;&#x7684; C++ &#x5E93;&#x5305;&#x542B;&#x8FDB;&#x6765;&#x3002; &#x540C;&#x65F6;&#x8FD8;&#x5305;&#x542B;&#x4E86;&#x6211;&#x4EEC;&#x8981;&#x7528;&#x5230;&#x7684;&#x6D88;&#x606F;&#x5934;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-comment">/**
 * @brief Sensor Combined uORB topic data callback
 */</span>
<span class="hljs-keyword">class</span> SensorCombinedListener : <span class="hljs-keyword">public</span> rclcpp::Node
{
</code></pre>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B; <code>SensorCombinedListener</code>&#xFF0C; &#x7EE7;&#x627F;&#x81EA; <code>rclcpp::Node</code> &#x57FA;&#x7C7B;&#x3002;</p>
<pre><code class="lang-cpp">public:
    explicit SensorCombinedListener() : Node(&quot;sensor_combined_listener&quot;) {
        subscription_ = this-&gt;create_subscription&lt;px4_msgs::msg::SensorCombined&gt;(
            &quot;SensorCombined_PubSubTopic&quot;, 10,
            [this](const px4_msgs::msg::SensorCombined::UniquePtr msg) {
            std::cout &lt;&lt; &quot;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&quot;;
            std::cout &lt;&lt; &quot;RECEIVED SENSOR COMBINED DATA&quot;   &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;=============================&quot;   &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;ts: &quot;          &lt;&lt; msg-&gt;timestamp    &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;gyro_rad[0]: &quot; &lt;&lt; msg-&gt;gyro_rad[0]  &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;gyro_rad[1]: &quot; &lt;&lt; msg-&gt;gyro_rad[1]  &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;gyro_rad[2]: &quot; &lt;&lt; msg-&gt;gyro_rad[2]  &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;gyro_integral_dt: &quot; &lt;&lt; msg-&gt;gyro_integral_dt &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;accelerometer_timestamp_relative: &quot; &lt;&lt; msg-&gt;accelerometer_timestamp_relative &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;accelerometer_m_s2[0]: &quot; &lt;&lt; msg-&gt;accelerometer_m_s2[0] &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;accelerometer_m_s2[1]: &quot; &lt;&lt; msg-&gt;accelerometer_m_s2[1] &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;accelerometer_m_s2[2]: &quot; &lt;&lt; msg-&gt;accelerometer_m_s2[2] &lt;&lt; std::endl;
            std::cout &lt;&lt; &quot;accelerometer_integral_dt: &quot; &lt;&lt; msg-&gt;accelerometer_integral_dt &lt;&lt; std::endl;
        });
    }
</code></pre>
<p>This creates a callback function for when the <code>sensor_combined</code> uORB messages are received (now as DDS messages). &#x4E00;&#x65E6;&#x6536;&#x5230;&#x6D88;&#x606F;&#x5C31;&#x6253;&#x5370;&#x51FA;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">private</span>:
    rclcpp::Subscription&lt;px4_msgs::msg::SensorCombined&gt;::SharedPtr subscription_;
};
</code></pre>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E86; <code>sensor_combined_topic</code> &#x4E3B;&#x9898;&#x7684;&#x8BA2;&#x9605;&#xFF0C;&#x53EF;&#x4EE5;&#x5339;&#x914D;&#x5230;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x8BE5;&#x6D88;&#x606F;&#x7684; ROS &#x5E7F;&#x64AD;&#x8005;&#x4E0A;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Starting sensor_combined listener node...&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    setvbuf(<span class="hljs-built_in">stdout</span>, <span class="hljs-literal">NULL</span>, _IONBF, BUFSIZ);
    rclcpp::init(argc, argv);
    rclcpp::spin(<span class="hljs-built_in">std</span>::make_shared&lt;SensorCombinedListener&gt;());

    rclcpp::shutdown();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x5728; <code>main</code> &#x51FD;&#x6570;&#x4E2D;&#x5C06; <code>SensorCombinedListener</code>&#x7C7B;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A; ROS &#x8282;&#x70B9;&#x5B9E;&#x4F8B;&#x5316;&#x3002;</p>
<h2 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ros2&#x5E7F;&#x64AD;&#x5668;"><a name="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ros2&#x5E7F;&#x64AD;&#x5668;" class="plugin-anchor" href="#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ros2&#x5E7F;&#x64AD;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ROS2&#x5E7F;&#x64AD;&#x5668;</h2>
<p>ROS2 &#x5E7F;&#x64AD;&#x5668;&#x8282;&#x70B9;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x5E03;&#x5230; DDS/RTPS &#x7F51;&#x7EDC; (&#x518D;&#x8F6C;&#x53D1;&#x81F3; PX4)&#x3002;</p>
<p>Taking as an example the <code>debug_vect_advertiser.cpp</code> under <code>px4_ros_com/src/advertisers</code>:</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;chrono&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;rclcpp/rclcpp.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;px4_msgs/msg/debug_vect.hpp&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>::chrono_literals;
</code></pre>
<p>&#x5305;&#x542B;&#x5FC5;&#x8981;&#x7684;&#x5934;&#x6587;&#x4EF6;&#xFF0C;&#x5305;&#x62EC; <code>debug_vect</code> &#x6D88;&#x606F;&#x5934;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> DebugVectAdvertiser : <span class="hljs-keyword">public</span> rclcpp::Node
{
</code></pre>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A; <code>DebugVectAdvertiser</code> &#x7C7B;&#xFF0C;&#x7EE7;&#x627F;&#x81EA; <code>rclcpp::Node</code> &#x57FA;&#x7C7B;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">public</span>:
    DebugVectAdvertiser() : Node(<span class="hljs-string">&quot;debug_vect_advertiser&quot;</span>) {
        publisher_ = <span class="hljs-keyword">this</span>-&gt;create_publisher&lt;px4_msgs::msg::DebugVect&gt;(<span class="hljs-string">&quot;DebugVect_PubSubTopic&quot;</span>, <span class="hljs-number">10</span>);
        <span class="hljs-keyword">auto</span> timer_callback =
        [<span class="hljs-keyword">this</span>]()-&gt;<span class="hljs-keyword">void</span> {
            <span class="hljs-keyword">auto</span> debug_vect = px4_msgs::msg::DebugVect();
            debug_vect.timestamp = <span class="hljs-keyword">this</span>-&gt;now().nanoseconds() * <span class="hljs-number">1E-3</span>;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name = <span class="hljs-string">&quot;test&quot;</span>;
            <span class="hljs-built_in">std</span>::copy(name.begin(), name.end(), debug_vect.name.begin());
            debug_vect.x = <span class="hljs-number">1.0</span>;
            debug_vect.y = <span class="hljs-number">2.0</span>;
            debug_vect.z = <span class="hljs-number">3.0</span>;
            RCLCPP_INFO(<span class="hljs-keyword">this</span>-&gt;get_logger(), <span class="hljs-string">&quot;\033[97m Publishing debug_vect: time: %f x:%f y:%f z:%f \033[0m&quot;</span>,
                                debug_vect.timestamp, debug_vect.x, debug_vect.y, debug_vect.z);
            <span class="hljs-keyword">this</span>-&gt;publisher_-&gt;publish(debug_vect);
        };
        timer_ = <span class="hljs-keyword">this</span>-&gt;create_wall_timer(<span class="hljs-number">500</span>ms, timer_callback);
    }

<span class="hljs-keyword">private</span>:
    rclcpp::TimerBase::SharedPtr timer_;
    rclcpp::Publisher&lt;px4_msgs::msg::DebugVect&gt;::SharedPtr publisher_;
};
</code></pre>
<p>&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002; &#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7531;&#x5B9A;&#x65F6;&#x5668;&#x89E6;&#x53D1;&#x7684;&#xFF0C;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x4E24;&#x6B21;&#x6D88;&#x606F;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Starting debug_vect advertiser node...&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    setvbuf(<span class="hljs-built_in">stdout</span>, <span class="hljs-literal">NULL</span>, _IONBF, BUFSIZ);
    rclcpp::init(argc, argv);
    rclcpp::spin(<span class="hljs-built_in">std</span>::make_shared&lt;DebugVectAdvertiser&gt;());

    rclcpp::shutdown();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5728; <code>main</code> &#x51FD;&#x6570;&#x4E2D;&#x5C06; <code>DebugVectAdvertiser</code> &#x7C7B;&#x5B9E;&#x4F8B;&#x5316;&#x6210;&#x4E00;&#x4E2A;ROS&#x8282;&#x70B9;&#x3002;</p>
<h2 id="creating-a-ros1-listener"><a name="creating-a-ros1-listener" class="plugin-anchor" href="#creating-a-ros1-listener"><i class="fa fa-link" aria-hidden="true"></i></a>Creating a ROS(1) listener</h2>
<p>&#x521B;&#x5EFA;ROS&#x8282;&#x70B9;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x8BE6;&#x7EC6;&#x7684;&#x6587;&#x6863;&#x4F9B;&#x53C2;&#x8003;&#xFF0C;&#x4E0D;&#x5728;&#x8D58;&#x8FF0;&#x3002; &#x5728; <code>ros1</code> &#x5206;&#x652F;&#x7684;&#x4EE3;&#x7801;&#x7684; <code>px4_ros_com/src/listeners</code> &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x5173;&#x4E8E; <code>sensor_combined</code> &#x6D88;&#x606F;&#x7684;ROS &#x76D1;&#x542C;&#x5668;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<h2 id="&#x4E0E;ros&#x65E0;&#x5173;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x793A;&#x4F8B;&#x6D4B;&#x8BD5;"><a name="&#x4E0E;ros&#x65E0;&#x5173;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x793A;&#x4F8B;&#x6D4B;&#x8BD5;" class="plugin-anchor" href="#&#x4E0E;ros&#x65E0;&#x5173;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x793A;&#x4F8B;&#x6D4B;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E0E;ROS&#x65E0;&#x5173;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x793A;&#x4F8B;/&#x6D4B;&#x8BD5;</h2>
<p>&#x4E0B;&#x9762;&#x662F;PX4-FastRTPS&#x6865;&#x63A5;&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x66F4;&#x591A;&#x793A;&#x4F8B;&#x3002;</p>
<ul>
<li><a href="micrortps_throughput_test.html">&#x541E;&#x5410;&#x91CF;&#x6D4B;&#x8BD5;</a>: &#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;PX4-FastRTPS&#x6865;&#x63A5;&#x541E;&#x5410;&#x91CF;&#x7684;&#x7B80;&#x5355;&#x793A;&#x4F8B;&#x3002;</li>
</ul>
<h2 id="px4-fastrpts&#x6865;&#x63A5;&#x4E0E;-ros2-&#x548C;-ros-&#x7684;&#x8054;&#x5408;&#x6D4B;&#x8BD5;"><a name="px4-fastrpts&#x6865;&#x63A5;&#x4E0E;-ros2-&#x548C;-ros-&#x7684;&#x8054;&#x5408;&#x6D4B;&#x8BD5;" class="plugin-anchor" href="#px4-fastrpts&#x6865;&#x63A5;&#x4E0E;-ros2-&#x548C;-ros-&#x7684;&#x8054;&#x5408;&#x6D4B;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>PX4-FastRPTS&#x6865;&#x63A5;&#x4E0E; ROS2 &#x548C; ROS &#x7684;&#x8054;&#x5408;&#x6D4B;&#x8BD5;</h2>
<p>&#x5FEB;&#x901F;&#x6D4B;&#x8BD5;&#x8BE5;&#x6A21;&#x5757;&#x7684;&#x6D41;&#x7A0B;&#x5982;&#x4E0B; (&#x4F7F;&#x7528; PX4 SITL &#x548C; Gazebo)&#xFF1A;</p>
<ol>
<li><p>&#x542F;&#x52A8; PX4 SITL &#x548C; Gazebo&#xFF1A;</p>
<pre><code class="lang-sh"> make px4_sitl_rtps gazebo
</code></pre>
</li>
<li><p>&#x5728;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x91CC;&#xFF0C;source &#x4E00;&#x4E0B; ROS2 &#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8; <code>ros1_bridge</code> (&#x8FD9;&#x6837; ROS2 &#x548C; ROS &#x8282;&#x70B9;&#x5C31;&#x53EF;&#x4EE5;&#x4E92;&#x76F8;&#x901A;&#x4FE1;&#x4E86;)&#x3002; &#x8FD8;&#x8981;&#x5C06; <code>ROS_MASTER_URI</code> &#x8BBE;&#x7F6E;&#x4E3A; <code>roscore</code> &#x6B63;&#x5728;/&#x5373;&#x5C06;&#x8FD0;&#x884C;&#x7684;IP&#x3002;</p>
<pre><code class="lang-sh"> $ <span class="hljs-built_in">source</span> /opt/ros/dashing/setup.bash
 $ <span class="hljs-built_in">source</span> ~/px4_ros_com_ros2/install/<span class="hljs-built_in">local</span>_setup.bash
 $ <span class="hljs-built_in">export</span> ROS_MASTER_URI=http://localhost:11311
 $ ros2 run ros1_bridge dynamic_bridge
</code></pre>
</li>
<li><p>&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x91CC;&#xFF0C;source &#x4E00;&#x4E0B; ROS &#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8; <code>sensor_combined</code> &#x76D1;&#x542C;&#x5668;&#x8282;&#x70B9;&#x3002; &#x4F7F;&#x7528; <code>roslaunch</code> &#x542F;&#x52A8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x9996;&#x5148;&#x4F1A;&#x81EA;&#x52A8;&#x542F;&#x52A8; <code>roscore</code> &#xFF1A;</p>
<pre><code class="lang-sh"> $ <span class="hljs-built_in">source</span> ~/px4_ros_com_ros1/install/setup.bash
 $ roslaunch px4_ros_com sensor_combined_listener.launch
</code></pre>
</li>
<li><p>&#x5728;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x91CC;&#xFF0C;source &#x4E00;&#x4E0B; ROS2 &#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8; <code>micrortps_agent</code> &#x5B88;&#x62A4;&#x7A0B;&#x5E8F;&#x5E76;&#x4F7F;&#x7528;UDP&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF1A;</p>
<pre><code class="lang-sh"> $ <span class="hljs-built_in">source</span> ~/px4_ros_com_ros2/install/setup.bash
 $ micrortps_agent -t UDP
</code></pre>
</li>
<li><p>&#x5728; <a href="../debug/system_console.html">NuttShell/System &#x63A7;&#x5236;&#x53F0;</a> &#x91CC;&#xFF0C; &#x542F;&#x52A8; <code>micrortps_client</code> &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x4F7F;&#x7528;UDP&#x534F;&#x8BAE;&#xFF1A;</p>
<pre><code class="lang-sh"> &gt; micrortps_client start -t UDP
</code></pre>
<p> &#x73B0;&#x5728;&#x542F;&#x52A8; ROS &#x76D1;&#x542C;&#x5668;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x7EC8;&#x7AEF;/&#x63A7;&#x5236;&#x53F0;&#x4E0A;&#x770B;&#x5230;&#x6570;&#x636E;&#x88AB;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF1A;</p>
<pre><code class="lang-sh"> RECEIVED DATA FROM SENSOR COMBINED
 ================================
 gyro_rad[0]: 0.00341645
 gyro_rad[1]: 0.00626475
 gyro_rad[2]: -0.000515705
 gyro_integral_dt: 4739
 accelerometer_timestamp_relative: 0
 accelerometer_m_s2[0]: -0.273381
 accelerometer_m_s2[1]: 0.0949186
 accelerometer_m_s2[2]: -9.76044
 accelerometer_integral_dt: 4739

 Publishing back...
</code></pre>
<p> &#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>rostopic hz</code> &#x547D;&#x4EE4;&#x6765;&#x68C0;&#x67E5;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x9891;&#x7387;&#x3002; &#x4F8B;&#x5982; <code>sensor_combined</code> &#x6D88;&#x606F;&#xFF1A;</p>
<pre><code class="lang-sh"> average rate: 248.187
 min: 0.000s max: 0.012s std dev: 0.00147s window: 2724
 average rate: 248.006
 min: 0.000s max: 0.012s std dev: 0.00147s window: 2972
 average rate: 247.330
 min: 0.000s max: 0.012s std dev: 0.00148s window: 3212
 average rate: 247.497
 min: 0.000s max: 0.012s std dev: 0.00149s window: 3464
 average rate: 247.458
 min: 0.000s max: 0.012s std dev: 0.00149s window: 3712
 average rate: 247.485
 min: 0.000s max: 0.012s std dev: 0.00148s window: 3960
</code></pre>
</li>
<li><p>&#x5728;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x91CC;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x6D4B;&#x8BD5; <code>sensor_combined</code> ROS2 &#x76D1;&#x542C;&#x5668;&#xFF1A;</p>
<pre><code class="lang-sh"> $ <span class="hljs-built_in">source</span> ~/px4_ros_com_ros2/install/<span class="hljs-built_in">local</span>_setup.bash
 $ ros2 launch px4_ros_com sensor_combined_listener.launch.py
</code></pre>
</li>
</ol>
<p>&#x4E5F;&#x4F1A;&#x6709;&#x6570;&#x636E;&#x88AB;&#x6253;&#x5370;&#x5230;&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> If ones uses the <code>build_all.bash</code> script, it automatically open and source all the required terminals so one just has to run the respective apps in each terminal.</p>
</blockquote>
<h2 id="&#x6545;&#x969C;&#x5904;&#x7406;"><a name="&#x6545;&#x969C;&#x5904;&#x7406;" class="plugin-anchor" href="#&#x6545;&#x969C;&#x5904;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6545;&#x969C;&#x5904;&#x7406;</h2>
<h3 id="client-reports-that-selected-uart-port-is-busy"><a name="client-reports-that-selected-uart-port-is-busy" class="plugin-anchor" href="#client-reports-that-selected-uart-port-is-busy"><i class="fa fa-link" aria-hidden="true"></i></a>Client reports that selected UART port is busy</h3>
<p>&#x5982;&#x679C;&#x6240;&#x9009;&#x4E32;&#x53E3;&#x5DF2;&#x88AB;&#x5360;&#x7528;&#xFF0C;&#x53EF;&#x80FD;&#x662F;MAVLink&#x5E94;&#x7528;&#x5DF2;&#x7ECF;&#x5728;&#x8FD0;&#x884C;&#x3002; &#x5982;&#x679C;MAVLink&#x548C;RTPS&#x8FDE;&#x63A5;&#x9700;&#x8981;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x4E3A;RTPS&#x8FDE;&#x63A5;&#x6307;&#x5B9A;&#x53E6;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x6216;&#x8005;&#x5C06;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x914D;&#x7F6E;&#x4E3A;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x3002; <!-- https://github.com/PX4/Devguide/issues/233 --></p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> A quick/temporary fix to allow bridge testing during development is to stop MAVLink from <em>NuttShell</em>: </p>
<pre><code>sh
  mavlink stop-all
</code></pre></blockquote>
<h3 id="agent-not-builtfastrtpsgen-is-not-found"><a name="agent-not-builtfastrtpsgen-is-not-found" class="plugin-anchor" href="#agent-not-builtfastrtpsgen-is-not-found"><i class="fa fa-link" aria-hidden="true"></i></a>Agent not built/fastrtpsgen is not found</h3>
<p><em>Agent</em>&#x4EE3;&#x7801;&#x662F;&#x7531;&#x4E00;&#x4E2A;&#x53EB;&#x505A; <em>fastrtpsgen</em> &#x7684; <em>Fast RTPS</em> &#x5DE5;&#x5177;&#x751F;&#x6210;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x5C06; Fast RTPS &#x5B89;&#x88C5;&#x5230;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#xFF0C;&#x90A3;&#x5C31;&#x5FC5;&#x987B;&#x5728;&#x6267;&#x884C; <em>make</em>&#x4E4B;&#x524D;&#xFF0C;&#x5C06;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>FASTRTPSGEN_DIR</code> &#x8BBE;&#x7F6E;&#x4E3A;&#x4F60;&#x7684;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#x3002;</p>
<p>&#x5728; Linux/Mac &#x5E73;&#x53F0;&#x4E0A;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code class="lang-sh"><span class="hljs-built_in">export</span> FASTRTPSGEN_DIR=/path/to/fastrtps/install/folder/bin
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> This should not be a problem if <a href="../setup/fast-rtps-installation.html">Fast RTPS is installed in the default location</a>.</p>
</blockquote>
<h3 id="enable-uart-on-an-obc-onboard-computer"><a name="enable-uart-on-an-obc-onboard-computer" class="plugin-anchor" href="#enable-uart-on-an-obc-onboard-computer"><i class="fa fa-link" aria-hidden="true"></i></a>Enable UART on an OBC (onboard computer)</h3>
<p>&#x8981;&#x5728;&#x6811;&#x8393;&#x6D3E;&#x6216;&#x5176;&#x5B83;OBC&#x4E0A;&#x4F7F;&#x7528;UART&#x4F20;&#x8F93;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x9996;&#x5148;&#x4F7F;&#x80FD;&#x6240;&#x6709;&#x4E32;&#x53E3;&#xFF1A;</p>
<ol>
<li><p>&#x786E;&#x4FDD; <code>userid</code> (&#x5728;&#x6811;&#x8393;&#x6D3E;&#x4E0A;&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x662F; pi) &#x662F; <code>dialout</code> &#x7528;&#x6237;&#x7EC4;&#x7684;&#x6210;&#x5458;&#xFF1A;</p>
<pre><code class="lang-sh"> groups pi
 sudo usermod <span class="hljs-_">-a</span> -G dialout pi
</code></pre>
</li>
<li><p>&#x7279;&#x522B;&#x9488;&#x5BF9;&#x6811;&#x8393;&#x6D3E;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5173;&#x95ED;&#x4F7F;&#x7528;&#x8BE5;&#x7AEF;&#x53E3;&#x7684;GPIO&#x4E32;&#x884C;&#x63A7;&#x5236;&#x53F0;&#xFF1A;</p>
<pre><code class="lang-sh"> sudo raspi-config
</code></pre>
<p> &#x5728;&#x663E;&#x793A;&#x7684;&#x83DC;&#x5355;&#x4E2D;&#x8FDB;&#x5165; <strong>Interfacing options &gt; Serial</strong> &#x9009;&#x9879;&#x3002; &#x4E3A; <em>Would you like a login shell to be accessible over serial?</em> &#x9009;&#x62E9; <strong>NO</strong> &#x3002; &#x91CD;&#x542F;&#x4F7F;&#x4E4B;&#x751F;&#x6548;&#x3002;</p>
</li>
<li><p>&#x5728;&#x5185;&#x6838;&#x4E2D;&#x67E5;&#x770B;UART&#xFF1A;</p>
<pre><code class="lang-sh"> sudo vi /boot/config.txt
</code></pre>
<p> &#x786E;&#x4FDD; <code>enable_uart</code> &#x88AB;&#x8BBE;&#x7F6E;&#x4E3A; 1&#xFF1A;</p>
<pre><code> enable_uart=1
</code></pre></li>
</ol>
<h2 id="&#x66F4;&#x591A;&#x4FE1;&#x606F;"><a name="&#x66F4;&#x591A;&#x4FE1;&#x606F;" class="plugin-anchor" href="#&#x66F4;&#x591A;&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x66F4;&#x591A;&#x4FE1;&#x606F;</h2>
<ul>
<li><a href="../setup/fast-rtps-installation.html">FastRTPS &#x5B89;&#x88C5;</a></li>
<li><a href="micrortps_manual_code_generation.html">&#x624B;&#x52A8;&#x751F;&#x6210;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x4EE3;&#x7406;&#x7AEF;&#x4EE3;&#x7801;</a></li>
<li><a href="https://github.com/ros2/ros2/wiki/DDS-and-ROS-middleware-implementations" target="_blank">DDS &#x548C; ROS &#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="mavlink.html" class="navigation navigation-prev " aria-label="Previous page: MAVLink Messaging">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="micrortps_throughput_test.html" class="navigation navigation-next " aria-label="Next page: Throughput Test">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"RTPS/ROS2 Interface","level":"1.6.3","depth":2,"next":{"title":"Throughput Test","level":"1.6.3.1","depth":3,"path":"middleware/micrortps_throughput_test.md","ref":"middleware/micrortps_throughput_test.md","articles":[]},"previous":{"title":"MAVLink Messaging","level":"1.6.2","depth":2,"path":"middleware/mavlink.md","ref":"middleware/mavlink.md","articles":[]},"dir":"ltr"},"config":{"plugins":["youtube","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","collapsible-menu","anchors","page-toc-button","ga","language-picker","custom-favicon","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","validate-links","versions-select@git+https://github.com/Dronecode/gitbook-plugin-versions-select.git","mathjax@git+https://github.com/Dronecode/plugin-mathjax.git#update_cdn","-mermaid","-stub-out-blocks@git+https://github.com/hamishwillee/gitbook-plugin-stub-out-blocks.git","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"theme-dronecode":{"logo":{"logo_large":"gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_full.png","logo_small":"gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_small.png","url":"https://www.dronecode.org/"}},"validate-links":{"defaultScheme":"https","local":"warn","remote":"disabled"},"collapsible-menu":{},"language-picker":{"grid-columns":3},"youtube":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"versions-select":{"type":"branches"},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{"tip":{"alert":"success","picto":"fa-thumbs-o-up"}},"highlight":{},"favicon":"favicon.ico","page-toc-button":{},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"custom-favicon":{},"mathjax":{"forceSVG":false,"version":"2.7.6"},"ga":{"configuration":"auto","token":"UA-33658859-3"},"versions":{"gitbookConfigURL":"https://raw.githubusercontent.com/PX4/Devguide/master/book.json","options":[{"value":"https://dev.px4.io/master/en/","text":"master"},{"value":"https://dev.px4.io/v1.11/en/","text":"1.11 - stable"},{"value":"https://dev.px4.io/v1.10/en/","text":"1.10"},{"value":"https://dev.px4.io/v1.9.0/en/","text":"1.9 "},{"value":"https://dev.px4.io/v1.8.2/en/","text":"1.8.2"},{"value":"https://dev.px4.io/v1.8.0/en/","text":"1.8.0"}]},"toolbar":{"buttons":[{"label":"Bug tracker","icon":"fa fa-bug","position":"left","url":"https://github.com/PX4/Devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{"label":"GitHub","icon":"fa fa-github","url":"https://github.com/PX4/Devguide"},{"label":"Edit page on github","icon":"fa fa-pencil-square-o","position":"left","url":"https://github.com/PX4/Devguide/edit/master/{{filepath_lang}}"}]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"logo":"./assets/site/logo_pro_small.png","px4_version":"master"},"title":"PX4 Developer Guide","language":"zh","gitbook":"*"},"file":{"path":"middleware/micrortps.md","mtime":"2020-11-05T21:05:26.021Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-11-05T21:06:12.284Z"},"basePath":"..","book":{"language":"zh"}});
        });
    </script>
</div>

    

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-versions-select/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

