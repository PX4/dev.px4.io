
<!DOCTYPE HTML>
<html lang="zh" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>外部位置估计（基于视觉/运动） · PX4 Developer Guide</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-versions-select/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="mavros_custom_messages.html" />
    
    
    <link rel="prev" href="raspberrypi_installation.html" />
    

    </head>
    <body>
        
    
    <!-- ##HW Add dronecode menu -->
    <div id="common_dronecode_menu">

      <div class="common_menu_logo large_version">
        <a href="https://www.dronecode.org/">
          <img src="../../gitbook/gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_full.png" alt="Dronecode logo (large)" />
        </a>
      </div>
      <div class="common_menu_logo small_version">
        <a href="https://www.dronecode.org/">
          <img src="../../gitbook/gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_small.png" alt="Dronecode logo (small)" />
        </a>
      </div>
      
      <div class="common_menu_options">
        
            <div class="common_dronecode_menu_item"><a href="http://px4.io/">PX4</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="http://qgroundcontrol.com/">QGroundControl</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="http://qgroundcontrol.com/">QGC</a></div>
            <div class="common_dronecode_menu_item"><a href="https://www.dronecode.org/sdk/">SDK</a></div>
            <div class="common_dronecode_menu_item"><a href="https://mavlink.io/en/">MAVLink</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="https://www.dronecode.org/documentation/">Documentation</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="https://www.dronecode.org/documentation/">Docs</a></div>
            <div class="common_dronecode_menu_item large_version"><a href="http://discuss.px4.io/">Support</a></div>
            <div class="common_dronecode_menu_item small_version"><a href="http://discuss.px4.io/">Help</a></div>
        
      </div>
    </div>
    
<!-- ##HW END Add dronecode menu -->
    
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="輸入並搜尋" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../setup/getting_started.html">
            
                <a href="../setup/getting_started.html">
            
                    
                    由此开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../setup/config_initial.html">
            
                <a href="../setup/config_initial.html">
            
                    
                    初始设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../setup/dev_env.html">
            
                <a href="../setup/dev_env.html">
            
                    
                    工具链安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../setup/dev_env_mac.html">
            
                <a href="../setup/dev_env_mac.html">
            
                    
                    Mac OS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../setup/dev_env_linux.html">
            
                <a href="../setup/dev_env_linux.html">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.2.1" data-path="../setup/dev_env_linux_ubuntu.html">
            
                <a href="../setup/dev_env_linux_ubuntu.html">
            
                    
                    Ubuntu/Debian Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.2" data-path="../setup/dev_env_linux_centos.html">
            
                <a href="../setup/dev_env_linux_centos.html">
            
                    
                    CentOS Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.3" data-path="../setup/dev_env_linux_arch.html">
            
                <a href="../setup/dev_env_linux_arch.html">
            
                    
                    Arch Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2.4" data-path="../setup/dev_env_advanced_linux.html">
            
                <a href="../setup/dev_env_advanced_linux.html">
            
                    
                    高级 Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../setup/dev_env_windows.html">
            
                <a href="../setup/dev_env_windows.html">
            
                    
                    Windows
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.3.1" data-path="../setup/dev_env_windows_cygwin.html">
            
                <a href="../setup/dev_env_windows_cygwin.html">
            
                    
                    Cygwin 工具链
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3.2" data-path="../setup/dev_env_windows_vm.html">
            
                <a href="../setup/dev_env_windows_vm.html">
            
                    
                    Virtual Machine 工具链
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3.3" data-path="../setup/dev_env_windows_bash_on_win.html">
            
                <a href="../setup/dev_env_windows_bash_on_win.html">
            
                    
                    Bash on Windows 工具链
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../setup/vscode.html">
            
                <a href="../setup/vscode.html">
            
                    
                    Visual Studio Code IDE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../setup/fast-rtps-installation.html">
            
                <a href="../setup/fast-rtps-installation.html">
            
                    
                    Fast RTPS installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../setup/generic_dev_tools.html">
            
                <a href="../setup/generic_dev_tools.html">
            
                    
                    Additional Tools
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../setup/building_px4.html">
            
                <a href="../setup/building_px4.html">
            
                    
                    构建代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../apps/hello_sky.html">
            
                <a href="../apps/hello_sky.html">
            
                    
                    编写您的第一个应用程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../apps/module_template.html">
            
                <a href="../apps/module_template.html">
            
                    
                    应用/模块模板
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../concept/">
            
                <a href="../concept/">
            
                    
                    概念
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../concept/architecture.html">
            
                <a href="../concept/architecture.html">
            
                    
                    PX4 系统架构概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../flight_stack/controller_diagrams.html">
            
                <a href="../flight_stack/controller_diagrams.html">
            
                    
                    控制器图解
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../concept/dronecode_architecture.html">
            
                <a href="../concept/dronecode_architecture.html">
            
                    
                    Dronecode 平台概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../concept/flight_modes.html">
            
                <a href="../concept/flight_modes.html">
            
                    
                    飞行模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../concept/flight_tasks.html">
            
                <a href="../concept/flight_tasks.html">
            
                    
                    Flight Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../concept/mixing.html">
            
                <a href="../concept/mixing.html">
            
                    
                    Mixing and Actuators
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../concept/custom_mixer_payload.html">
            
                <a href="../concept/custom_mixer_payload.html">
            
                    
                    Custom Payload Mixer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../concept/pwm_limit.html">
            
                <a href="../concept/pwm_limit.html">
            
                    
                    PWM limit state machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../concept/system_startup.html">
            
                <a href="../concept/system_startup.html">
            
                    
                    System Startup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../concept/sd_card_layout.html">
            
                <a href="../concept/sd_card_layout.html">
            
                    
                    SD Card Layout
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../simulation/">
            
                <a href="../simulation/">
            
                    
                    仿真
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../simulation/jmavsim.html">
            
                <a href="../simulation/jmavsim.html">
            
                    
                    jMAVSim 仿真模拟
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../simulation/multi_vehicle_jmavsim.html">
            
                <a href="../simulation/multi_vehicle_jmavsim.html">
            
                    
                    Multi-Vehicle Sim with JMAVSim
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../simulation/gazebo.html">
            
                <a href="../simulation/gazebo.html">
            
                    
                    Gazebo 仿真模拟
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../simulation/gazebo_vehicles.html">
            
                <a href="../simulation/gazebo_vehicles.html">
            
                    
                    Gazebo Vehicles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../simulation/gazebo_worlds.html">
            
                <a href="../simulation/gazebo_worlds.html">
            
                    
                    Gazebo Worlds
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../simulation/multi_vehicle_simulation_gazebo.html">
            
                <a href="../simulation/multi_vehicle_simulation_gazebo.html">
            
                    
                    Multi-Vehicle Sim with Gazebo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../simulation/flightgear.html">
            
                <a href="../simulation/flightgear.html">
            
                    
                    FlightGear Simulation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../simulation/flightgear_vehicles.html">
            
                <a href="../simulation/flightgear_vehicles.html">
            
                    
                    FlightGear Vehicles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../simulation/multi_vehicle_flightgear.html">
            
                <a href="../simulation/multi_vehicle_flightgear.html">
            
                    
                    Multi-Vehicle Sim with FlightGear
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../simulation/jsbsim.html">
            
                <a href="../simulation/jsbsim.html">
            
                    
                    JSBSim Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../simulation/airsim.html">
            
                <a href="../simulation/airsim.html">
            
                    
                    AirSim Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../simulation/multi-vehicle-simulation.html">
            
                <a href="../simulation/multi-vehicle-simulation.html">
            
                    
                    Multi-Vehicle Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../simulation/failsafes.html">
            
                <a href="../simulation/failsafes.html">
            
                    
                    Simulate Failsafes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../simulation/hitl.html">
            
                <a href="../simulation/hitl.html">
            
                    
                    HITL Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../simulation/simulation-in-hardware.html">
            
                <a href="../simulation/simulation-in-hardware.html">
            
                    
                    Simulation-In-Hardware
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../hardware/">
            
                <a href="../hardware/">
            
                    
                    硬件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../hardware/reference_design.html">
            
                <a href="../hardware/reference_design.html">
            
                    
                    飞行控制器参考设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../hardware/board_support_guide.html">
            
                <a href="../hardware/board_support_guide.html">
            
                    
                    Manufacturer’s Board Support Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../hardware/porting_guide.html">
            
                <a href="../hardware/porting_guide.html">
            
                    
                    Flight Controller Porting Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../hardware/porting_guide_nuttx.html">
            
                <a href="../hardware/porting_guide_nuttx.html">
            
                    
                    NuttX Board Porting Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../airframes/">
            
                <a href="../airframes/">
            
                    
                    Airframes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="../airframes/airframe_reference.html">
            
                <a href="../airframes/airframe_reference.html">
            
                    
                    Airframes Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.2" data-path="../airframes/adding_a_new_frame.html">
            
                <a href="../airframes/adding_a_new_frame.html">
            
                    
                    Adding a New Airframe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../middleware/drivers.html">
            
                <a href="../middleware/drivers.html">
            
                    
                    Device Drivers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../data_links/telemetry.html">
            
                <a href="../data_links/telemetry.html">
            
                    
                    Telemetry Radio
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.6.1" data-path="../data_links/sik_radio.html">
            
                <a href="../data_links/sik_radio.html">
            
                    
                    SiK Radio
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../sensor_bus/">
            
                <a href="../sensor_bus/">
            
                    
                    Sensor and Actuator I/O
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.1" data-path="../sensor_bus/i2c.html">
            
                <a href="../sensor_bus/i2c.html">
            
                    
                    I2C Bus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2" data-path="../uavcan/">
            
                <a href="../uavcan/">
            
                    
                    UAVCAN Bus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.2.1" data-path="../uavcan/bootloader_installation.html">
            
                <a href="../uavcan/bootloader_installation.html">
            
                    
                    UAVCAN Bootloader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.2" data-path="../uavcan/node_firmware.html">
            
                <a href="../uavcan/node_firmware.html">
            
                    
                    UAVCAN Firmware Upgrades
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.3" data-path="../uavcan/node_enumeration.html">
            
                <a href="../uavcan/node_enumeration.html">
            
                    
                    UAVCAN Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7.2.4" data-path="../uavcan/notes.html">
            
                <a href="../uavcan/notes.html">
            
                    
                    UAVCAN Various Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.7.3" data-path="../uart/">
            
                <a href="../uart/">
            
                    
                    UART/Serial Ports
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.7.3.1" data-path="../uart/user_configurable_serial_driver.html">
            
                <a href="../uart/user_configurable_serial_driver.html">
            
                    
                    Port-Configurable Serial Drivers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../advanced/rtk_gps.html">
            
                <a href="../advanced/rtk_gps.html">
            
                    
                    RTK GPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../advanced/gimbal_control.html">
            
                <a href="../advanced/gimbal_control.html">
            
                    
                    Gimbal (Mount) Control Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../companion_computer/pixhawk_companion.html">
            
                <a href="../companion_computer/pixhawk_companion.html">
            
                    
                    Companion Computers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../middleware/">
            
                <a href="../middleware/">
            
                    
                    中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../middleware/uorb.html">
            
                <a href="../middleware/uorb.html">
            
                    
                    uORB 消息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../middleware/mavlink.html">
            
                <a href="../middleware/mavlink.html">
            
                    
                    MAVLink Messaging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../middleware/micrortps.html">
            
                <a href="../middleware/micrortps.html">
            
                    
                    RTPS/ROS2 Interface
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../middleware/micrortps_throughput_test.html">
            
                <a href="../middleware/micrortps_throughput_test.html">
            
                    
                    Throughput Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../middleware/micrortps_manual_code_generation.html">
            
                <a href="../middleware/micrortps_manual_code_generation.html">
            
                    
                    Manually Generate Client/Agent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../middleware/modules_main.html">
            
                <a href="../middleware/modules_main.html">
            
                    
                    模块 & 命令
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../middleware/modules_command.html">
            
                <a href="../middleware/modules_command.html">
            
                    
                    命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../middleware/modules_communication.html">
            
                <a href="../middleware/modules_communication.html">
            
                    
                    通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../middleware/modules_controller.html">
            
                <a href="../middleware/modules_controller.html">
            
                    
                    控制器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../middleware/modules_driver.html">
            
                <a href="../middleware/modules_driver.html">
            
                    
                    驱动
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../middleware/modules_driver_airspeed_sensor.html">
            
                <a href="../middleware/modules_driver_airspeed_sensor.html">
            
                    
                    Airspeed Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="../middleware/modules_driver_baro.html">
            
                <a href="../middleware/modules_driver_baro.html">
            
                    
                    Baro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="../middleware/modules_driver_distance_sensor.html">
            
                <a href="../middleware/modules_driver_distance_sensor.html">
            
                    
                    Distance Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.4" data-path="../middleware/modules_driver_imu.html">
            
                <a href="../middleware/modules_driver_imu.html">
            
                    
                    IMU
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.5" data-path="../middleware/modules_driver_magnetometer.html">
            
                <a href="../middleware/modules_driver_magnetometer.html">
            
                    
                    Magnetometer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../middleware/modules_estimator.html">
            
                <a href="../middleware/modules_estimator.html">
            
                    
                    估计器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../middleware/modules_simulation.html">
            
                <a href="../middleware/modules_simulation.html">
            
                    
                    Simulations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../middleware/modules_system.html">
            
                <a href="../middleware/modules_system.html">
            
                    
                    System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../middleware/modules_template.html">
            
                <a href="../middleware/modules_template.html">
            
                    
                    Template
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../robotics/">
            
                <a href="../robotics/">
            
                    
                    机器人技术
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="offboard_control.html">
            
                <a href="offboard_control.html">
            
                    
                    Linux 的离板模式控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="./">
            
                <a href="./">
            
                    
                    ROS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="mavros_installation.html">
            
                <a href="mavros_installation.html">
            
                    
                    MAVROS \（ROS 上的 MAVLink\）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="mavros_offboard.html">
            
                <a href="mavros_offboard.html">
            
                    
                    MAVROS 离板例程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="../simulation/ros_interface.html">
            
                <a href="../simulation/ros_interface.html">
            
                    
                    另见 Gazebo 模拟。
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="../simulation/gazebo_octomap.html">
            
                <a href="../simulation/gazebo_octomap.html">
            
                    
                    具有 ROS 的 OctoMap 模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="raspberrypi_installation.html">
            
                <a href="raspberrypi_installation.html">
            
                    
                    在 RPi 上安装 ROS
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.2.6" data-path="external_position_estimation.html">
            
                <a href="external_position_estimation.html">
            
                    
                    外部位置估计（基于视觉/运动）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.7" data-path="mavros_custom_messages.html">
            
                <a href="mavros_custom_messages.html">
            
                    
                    Sending Custom Messages from MAVROS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../robotics/dronekit.html">
            
                <a href="../robotics/dronekit.html">
            
                    
                    DroneKit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../debug/">
            
                <a href="../debug/">
            
                    
                    调试日志
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../debug/faq.html">
            
                <a href="../debug/faq.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../debug/consoles.html">
            
                <a href="../debug/consoles.html">
            
                    
                    Consoles/Shells
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../debug/mavlink_shell.html">
            
                <a href="../debug/mavlink_shell.html">
            
                    
                    MAVLink Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="../debug/system_console.html">
            
                <a href="../debug/system_console.html">
            
                    
                    System Console
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../debug/swd_debug.html">
            
                <a href="../debug/swd_debug.html">
            
                    
                    SWD/JLink Debug Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../debug/gdb_debugging.html">
            
                <a href="../debug/gdb_debugging.html">
            
                    
                    Autopilot Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../debug/eclipse_jlink.html">
            
                <a href="../debug/eclipse_jlink.html">
            
                    
                    Eclipse/JLink Hardware Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../debug/sensor_uorb_topic_debugging.html">
            
                <a href="../debug/sensor_uorb_topic_debugging.html">
            
                    
                    Sensor/Topic Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../debug/simulation_debugging.html">
            
                <a href="../debug/simulation_debugging.html">
            
                    
                    Simulation Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../debug/debug_values.html">
            
                <a href="../debug/debug_values.html">
            
                    
                    Sending Debug Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../debug/system_wide_replay.html">
            
                <a href="../debug/system_wide_replay.html">
            
                    
                    System-wide Replay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../debug/profiling.html">
            
                <a href="../debug/profiling.html">
            
                    
                    Profiling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../log/logging.html">
            
                <a href="../log/logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../log/flight_log_analysis.html">
            
                <a href="../log/flight_log_analysis.html">
            
                    
                    Flight Log Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.13" data-path="../log/ulog_file_format.html">
            
                <a href="../log/ulog_file_format.html">
            
                    
                    ULog File Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../tutorials/tutorials.html">
            
                <a href="../tutorials/tutorials.html">
            
                    
                    教程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../qgc/">
            
                <a href="../qgc/">
            
                    
                    地面控制站
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../qgc/video_streaming.html">
            
                <a href="../qgc/video_streaming.html">
            
                    
                    Video Streaming from Odroid C1 to QGC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../qgc/video_streaming_wifi_broadcast.html">
            
                <a href="../qgc/video_streaming_wifi_broadcast.html">
            
                    
                    远距离视频流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../tutorials/linux_sbus.html">
            
                <a href="../tutorials/linux_sbus.html">
            
                    
                    Connecting an RC Receiver on Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    高级主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../advanced/parameters_and_configurations.html">
            
                <a href="../advanced/parameters_and_configurations.html">
            
                    
                    参数 & 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../advanced/parameter_reference.html">
            
                <a href="../advanced/parameter_reference.html">
            
                    
                    参数参照表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../advanced/computer_vision.html">
            
                <a href="../advanced/computer_vision.html">
            
                    
                    机器视觉
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.3.1" data-path="../tutorials/motion-capture-vicon-optitrack.html">
            
                <a href="../tutorials/motion-capture-vicon-optitrack.html">
            
                    
                    运动捕获（VICON, Optitrack）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../advanced/realsense_intel_driver.html">
            
                <a href="../advanced/realsense_intel_driver.html">
            
                    
                    安装英特尔 RealSense R200 的驱动程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../advanced/switching_state_estimators.html">
            
                <a href="../advanced/switching_state_estimators.html">
            
                    
                    切换状态估计器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../advanced/out_of_tree_modules.html">
            
                <a href="../advanced/out_of_tree_modules.html">
            
                    
                    树外模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../software_update/stm32_bootloader.html">
            
                <a href="../software_update/stm32_bootloader.html">
            
                    
                    STM32 Bootloader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../advanced/system_tunes.html">
            
                <a href="../advanced/system_tunes.html">
            
                    
                    System Tunes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../test_and_ci/">
            
                <a href="../test_and_ci/">
            
                    
                    平台测试和 CI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../test_and_ci/test_flights.html">
            
                <a href="../test_and_ci/test_flights.html">
            
                    
                    测试飞行
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../test_cards/mc_01_manual_modes.html">
            
                <a href="../test_cards/mc_01_manual_modes.html">
            
                    
                    测试 MC_01 - 手动模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="../test_cards/mc_02_full_autonomous.html">
            
                <a href="../test_cards/mc_02_full_autonomous.html">
            
                    
                    测试 MC_02-完全自主
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.3" data-path="../test_cards/mc_03_auto_manual_mix.html">
            
                <a href="../test_cards/mc_03_auto_manual_mix.html">
            
                    
                    测试 MC_03 - 自动手动混合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.4" data-path="../test_cards/mc_04_failsafe_testing.html">
            
                <a href="../test_cards/mc_04_failsafe_testing.html">
            
                    
                    测试 MC_04 -故障安全测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.5" data-path="../test_cards/mc_05_indoor_flight_manual_modes.html">
            
                <a href="../test_cards/mc_05_indoor_flight_manual_modes.html">
            
                    
                    测试 MC_05-室内飞行（手动模式）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../test_and_ci/unit_tests.html">
            
                <a href="../test_and_ci/unit_tests.html">
            
                    
                    单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../test_and_ci/continous_integration.html">
            
                <a href="../test_and_ci/continous_integration.html">
            
                    
                    持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../test_and_ci/jenkins_ci.html">
            
                <a href="../test_and_ci/jenkins_ci.html">
            
                    
                    Jenkins 持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../test_and_ci/integration_testing.html">
            
                <a href="../test_and_ci/integration_testing.html">
            
                    
                    ROS Integration Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../test_and_ci/integration_testing_mavsdk.html">
            
                <a href="../test_and_ci/integration_testing_mavsdk.html">
            
                    
                    MAVSDK Integration Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../test_and_ci/docker.html">
            
                <a href="../test_and_ci/docker.html">
            
                    
                    Docker Containers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../test_and_ci/maintenance.html">
            
                <a href="../test_and_ci/maintenance.html">
            
                    
                    Maintenance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../contribute/">
            
                <a href="../contribute/">
            
                    
                    Contribution (&Dev Call)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../contribute/dev_call.html">
            
                <a href="../contribute/dev_call.html">
            
                    
                    Dev Call
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../contribute/code.html">
            
                <a href="../contribute/code.html">
            
                    
                    Source Code Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="../contribute/git_examples.html">
            
                <a href="../contribute/git_examples.html">
            
                    
                    GIT Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../contribute/docs.html">
            
                <a href="../contribute/docs.html">
            
                    
                    Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../contribute/translation.html">
            
                <a href="../contribute/translation.html">
            
                    
                    Translation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../contribute/notation.html">
            
                <a href="../contribute/notation.html">
            
                    
                    Terminology/Notation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../contribute/licenses.html">
            
                <a href="../contribute/licenses.html">
            
                    
                    Licenses
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../contribute/support.html">
            
                <a href="../contribute/support.html">
            
                    
                    Support
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Dronecode 相关资源</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <a target="_blank" href="https://docs.px4.io/master/en/">
            
                    
                    PX4 用户指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <a target="_blank" href="https://docs.qgroundcontrol.com/en/">
            
                    
                    QGroundControl用户指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <a target="_blank" href="http://dev.qgc.dimianzhan.com/zh/">
            
                    
                    QGroundControl 开发人员指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" >
            
                <a target="_blank" href="https://mavlink.io/en/">
            
                    
                    MAVLink指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" >
            
                <a target="_blank" href="https://mavsdk.mavlink.io/develop/en/index.html">
            
                    
                    MAVSDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" >
            
                <a target="_blank" href="https://camera-manager.dronecode.org/en/">
            
                    
                    Dronecode相机管理器
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >外部位置估计（基于视觉/运动）</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x5229;&#x7528;&#x89C6;&#x89C9;&#x6216;&#x8FD0;&#x52A8;&#x6355;&#x6349;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;"><a name="&#x5229;&#x7528;&#x89C6;&#x89C9;&#x6216;&#x8FD0;&#x52A8;&#x6355;&#x6349;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;" class="plugin-anchor" href="#&#x5229;&#x7528;&#x89C6;&#x89C9;&#x6216;&#x8FD0;&#x52A8;&#x6355;&#x6349;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5229;&#x7528;&#x89C6;&#x89C9;&#x6216;&#x8FD0;&#x52A8;&#x6355;&#x6349;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;</h1>
<p>&#x53EF;&#x89C6;&#x60EF;&#x6027;&#x6D4B;&#x8DDD;&#xFF08;VIO&#xFF09;&#x548C;&#x8FD0;&#x52A8;&#x6355;&#x6349;&#xFF08;MOCAP&#xFF09;&#x7CFB;&#x7EDF;&#x5141;&#x8BB8;&#x8F7D;&#x5177;&#x5728;&#x5168;&#x5C40;&#x4F4D;&#x7F6E;&#x6E90;&#x4E0D;&#x53EF;&#x7528;&#x6216;&#x4E0D;&#x53EF;&#x9760;&#x65F6;&#xFF08;&#x4F8B;&#x5982;&#x5728;&#x5BA4;&#x5185;&#xFF0C;&#x6216;&#x5728;&#x6865;&#x4E0B;&#x98DE;&#x884C;&#x65F6;&#xFF09;&#x5BFC;&#x822A;&#x3002; &#x7B49;&#x7B49;&#x2026;&#x2026;</p>
<p>VIO &#x548C; MOCAP &#x90FD;&#x4ECE;&#x201C;&#x89C6;&#x89C9;&#x201D;&#x4FE1;&#x606F;&#x4E2D;&#x786E;&#x5B9A;&#x98DE;&#x673A;&#x7684; <em>pose</em> &#xFF08;&#x4F4D;&#x7F6E;&#x548C;&#x59FF;&#x6001;&#xFF09;&#x3002; &#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x662F;&#x6846;&#x67B6;&#x900F;&#x89C6;&#x56FE;&#xFF1A;</p>
<ul>
<li>VIO &#x4F7F;&#x7528; <em>&#x677F;&#x8F7D;&#x4F20;&#x611F;&#x5668; </em> &#x4ECE;&#x8F66;&#x8F86;&#x7684;&#x89D2;&#x5EA6;&#x83B7;&#x53D6;&#x59FF;&#x52BF;&#x6570;&#x636E;&#xFF08;&#x89C1; <a href="https://en.wikipedia.org/wiki/Visual_odometry#Egomotion" target="_blank">egomotion</a>&#xFF09;&#x3002;</li>
<li>MoCap &#x4F7F;&#x7528; <em>&#x79BB;&#x677F;&#x6444;&#x50CF;&#x673A;</em> &#x7CFB;&#x7EDF;&#x5728; 3D &#x7A7A;&#x95F4;&#x4E2D;&#x83B7;&#x53D6;&#x98DE;&#x673A;&#x59FF;&#x6001;&#x6570;&#x636E;&#xFF08;&#x5373;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7CFB;&#x7EDF;&#xFF0C;&#x544A;&#x8BC9;&#x98DE;&#x673A;&#x5176;&#x59FF;&#x6001;&#xFF09;&#x3002;</li>
</ul>
<p>Pose data from either type of system can be used to update a PX4-based autopilot&apos;s local position estimate (relative to the local origin) and also can optionally also be fused into the vehicle attitude estimation. Additionally, if the external pose system also provides linear velocity measurements, it can be used to improve the state estimate (fusion of linear velocity measurements is only supported by the EKF2).</p>
<p>&#x672C;&#x4E3B;&#x9898;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x57FA;&#x4E8E; px4 &#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4EE5;&#x4FBF;&#x4ECE; MoCap/VIO &#x7CFB;&#x7EDF;&#xFF08;&#x901A;&#x8FC7; ROS &#x6216;&#x5176;&#x4ED6; MAVLink &#x7CFB;&#x7EDF;&#xFF09;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x66F4;&#x5177;&#x4F53;&#x5730;&#x8BF4;&#x660E;&#x5982;&#x4F55;&#x8BBE;&#x7F6E; MoCap &#x7CFB;&#x7EDF;&#xFF0C;&#x5982; VICON &#x548C; Optitrack&#xFF0C;&#x4EE5;&#x53CA;&#x57FA;&#x4E8E;&#x89C6;&#x89C9;&#x7684;&#x4F30;&#x8BA1;&#x7CFB;&#x7EDF;&#xFF08;&#x5982; <a href="https://github.com/ethz-asl/rovio" target="_blank">ROVIO</a>&#x3001;<a href="https://github.com/uzh-rpg/rpg_svo" target="_blank">SVO</a> &#x548C; <a href="https://github.com/ethz-asl/ethzasl_ptam" target="_blank">PTAM</a>&#xFF09;&#x3002;</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x8BF4;&#x660E;&#x56E0;&#x60A8;&#x4F7F;&#x7528;&#x7684;&#x662F; EKF2 &#x8FD8;&#x662F; LPE &#x4F30;&#x8BA1;&#x5668;&#x800C;&#x5F02;&#x3002;</p>
</blockquote>
<h2 id="px4-mavlink-&#x96C6;&#x6210;"><a name="px4-mavlink-&#x96C6;&#x6210;" class="plugin-anchor" href="#px4-mavlink-&#x96C6;&#x6210;"><i class="fa fa-link" aria-hidden="true"></i></a>PX4 MAVLink &#x96C6;&#x6210;</h2>
<p>PX4 &#x4F7F;&#x7528;&#x4EE5;&#x4E0B; MAVLink &#x6D88;&#x606F;&#x83B7;&#x53D6;&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x6620;&#x5C04;&#x5230; <a href="http://dev.px4.io/en/middleware/uorb.html" target="_blank">uORB &#x4E3B;&#x9898;</a>&#xFF1A;</p>
<table>
<thead>
<tr>
<th>MAVLink</th>
<th>uORB</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://mavlink.io/en/messages/common.html#VISION_POSITION_ESTIMATE" target="_blank">VISION_POSITION_ESTIMATE</a></td>
<td><code>vehicle_visual_odometry</code></td>
</tr>
<tr>
<td><a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank">ODOMETRY</a> (<code>frame_id =</code> <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_FRD" target="_blank">MAV_FRAME_LOCAL_FRD</a>)</td>
<td><code>vehicle_visual_odometry</code></td>
</tr>
<tr>
<td><a href="https://mavlink.io/en/messages/common.html#ATT_POS_MOCAP" target="_blank">ATT_POS_MOCAP</a></td>
<td><code>vehicle_mocap_odometry</code></td>
</tr>
<tr>
<td><a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank">ODOMETRY</a> (<code>frame_id =</code> <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_MOCAP_NED" target="_blank">MAV_FRAME_MOCAP_NED</a>)</td>
<td><code>vehicle_mocap_odometry</code></td>
</tr>
</tbody>
</table>
<p>EKF2 &#x53EA;&#x8BA2;&#x9605; <code>vehicle_visual_odometry</code> &#x4E3B;&#x9898;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x80FD;&#x5904;&#x7406;&#x524D;&#x4E24;&#x4E2A;&#x6D88;&#x606F;&#xFF08;MoCap &#x7CFB;&#x7EDF;&#x5FC5;&#x987B;&#x751F;&#x6210;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x624D;&#x80FD;&#x4E0E; EKF2 &#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF09;&#x3002; The odometry message is the only message that can send also linear velocities to PX4. The LPE estimator subscribes to both topics, and can hence process all the above messages.</p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> PX4 &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; EKF2 &#x4F30;&#x8BA1;&#x3002; &#x76F8;&#x6BD4; LPE &#x5F97;&#x5230;&#x66F4;&#x597D;&#x7684;&#x6D4B;&#x8BD5;&#x548C;&#x652F;&#x6301;&#xFF0C;&#x66F4;&#x5F97;&#x5230;&#x63A8;&#x8350;&#x3002;</p>
</blockquote>
<p>&#x6D88;&#x606F;&#x5E94;&#x5728; 30Hz&#xFF08;&#x5982;&#x679C;&#x5305;&#x542B;&#x534F;&#x65B9;&#x5DEE;&#xFF09;&#x548C; 50 Hz &#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x6D41;&#x5F0F;&#x4F20;&#x8F93;&#x3002;</p>
<p>The following MAVLink &quot;vision&quot; messages are not currently supported by PX4: <a href="https://mavlink.io/en/messages/common.html#GLOBAL_VISION_POSITION_ESTIMATE" target="_blank">GLOBAL_VISION_POSITION_ESTIMATE</a>, <a href="https://mavlink.io/en/messages/common.html#VISION_SPEED_ESTIMATE" target="_blank">VISION_SPEED_ESTIMATE</a>, <a href="https://mavlink.io/en/messages/common.html#VICON_POSITION_ESTIMATE" target="_blank">VICON_POSITION_ESTIMATE</a></p>
<h2 id="&#x53C2;&#x8003;&#x673A;&#x67B6;"><a name="&#x53C2;&#x8003;&#x673A;&#x67B6;" class="plugin-anchor" href="#&#x53C2;&#x8003;&#x673A;&#x67B6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x8003;&#x673A;&#x67B6;</h2>
<p>PX4 uses FRD (X <strong>F</strong>orward, Y <strong>R</strong>ight and Z <strong>D</strong>own) for the local body frame as well for the reference frame. When using the heading of the magnetometer, the PX4 reference frame x axis will be aligned with north, so therefore it is called NED (X <strong>N</strong>orth, Y <strong>E</strong>ast, Z <strong>D</strong>own). The heading of the reference frame of the PX4 estimator and the one of the external pose estimate will not match in most cases. Therefore the reference frame of the external pose estimate is named differently, it is called <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_FRD" target="_blank">MAV_FRAME_LOCAL_FRD</a>.</p>
<p>Depending on the source of your reference frame, you will need to apply a custom transformation to the pose estimate before sending the MAVLink Vision/MoCap message. This is necessary to change the orientation of the parent and child frame of the pose estimate, such that it fits the PX4 convention. Have a look at the MAVROS <a href="https://github.com/mavlink/mavros/blob/master/mavros_extras/src/plugins/odom.cpp" target="_blank"><em>odom</em> plugin</a> for the necessary transformations.</p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> ROS &#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x9762;&#x7684; <a href="#ros_reference_frames">&#x53C2;&#x8003;&#x673A;&#x67B6;&#x548C; ROS</a> &#x4E2D;&#x627E;&#x5230;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x3002;</p>
</blockquote>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528; optitrack &#x6846;&#x67B6;&#xFF0C;&#x5219;&#x672C;&#x5730;&#x6846;&#x67B6;&#x5728;&#x6C34;&#x5E73;&#x9762;&#x4E0A;&#x5177;&#x6709; <script type="math/tex; ">x</script> &#x548C; <script type="math/tex; ">z</script>&#xFF08;<em>x</em> &#x6B63;&#x9762;&#x548C; <em>z</em> &#x53F3;&#xFF09;&#xFF0C;&#x800C; <em>y</em> &#x8F74;&#x662F;&#x5782;&#x76F4;&#x7684;&#xFF0C;&#x6307;&#x5411;&#x4E0A;&#x65B9;&#x3002; &#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x8F6C;&#x6362;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8F6C;&#x6362;optrack&#x5750;&#x6807;&#x7CFB;&#x5230;NED&#x7CFB;&#x4E2D;&#x3002;</p>
<p><code>x_{mav}</code>&#xFF0C;<code>y_{mav}</code> &#x548C; <code>z_{mav}</code> &#x662F;&#x6211;&#x4EEC;&#x5C06;&#x901A;&#x8FC7; MAVLink &#x53D1;&#x9001;&#x7684;&#x4F4D;&#x7F6E;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#xFF1A;</p>
<pre><code>x_{mav} = x_{mocap}
y_{mav} = z_{mocap}
z_{mav} = - y_{mocap}
</code></pre><p>&#x5728;&#x65B9;&#x5411;&#x65B9;&#x9762;&#xFF0C;&#x4FDD;&#x6301;&#x6807;&#x91CF;&#x90E8;&#x5206; <em>w</em> &#x56DB;&#x5143;&#x6570;&#xFF0C;&#x5E76;&#x4EE5;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x4EA4;&#x6362;&#x77E2;&#x91CF;&#x90E8;&#x5206; <em>x</em>&#x3001;<em>y</em> &#x548C; <em>z</em>&#x3002; &#x60A8;&#x53EF;&#x4EE5;&#x5C06;&#x6B64;&#x6280;&#x5DE7;&#x5E94;&#x7528;&#x4E8E;&#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;-&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x83B7;&#x53D6; NED &#x5E27;&#xFF0C;&#x8BF7;&#x76F8;&#x5E94;&#x5730;&#x67E5;&#x770B;&#x60A8;&#x7684; MoCap &#x8F93;&#x51FA;&#x548C;&#x4EA4;&#x6362;&#x8F74;&#x3002;</p>
<h2 id="ekf2-&#x8C03;&#x53C2;&#x914D;&#x7F6E;"><a name="ekf2-&#x8C03;&#x53C2;&#x914D;&#x7F6E;" class="plugin-anchor" href="#ekf2-&#x8C03;&#x53C2;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>EKF2 &#x8C03;&#x53C2;/&#x914D;&#x7F6E;</h2>
<p>Note: this is a quick overview. For more detailed information, check the <a href="https://docs.px4.io/master/en/advanced_config/tuning_the_ecl_ekf.html" target="_blank">EKF2 tuning guide</a></p>
<p>The following parameters must be set to use external position information with EKF2 (these can be set in <em>QGroundControl</em> &gt; <strong>Vehicle Setup &gt; Parameters &gt; EKF2</strong>).</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;</th>
<th>&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;&#x7684;&#x8BBE;&#x7F6E;</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../advanced/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a></td>
<td>Set <em>vision position fusion</em>, <em>vision velocity fusion</em>, <em>vision yaw fusion</em> and <em>external vision rotation</em> accoring to your desired fusion model.</td>
</tr>
<tr>
<td><a href="../advanced/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a></td>
<td>&#x8BBE;&#x7F6E;&#x4E3A; <em>Vision</em> &#x4F7F;&#x7528;&#x89C6;&#x89C9;&#x4F5C;&#x4E3A;&#x9AD8;&#x5EA6;&#x4F30;&#x8BA1;&#x7684;&#x4E3B;&#x8981;&#x6765;&#x6E90;&#x3002;</td>
</tr>
<tr>
<td><a href="../advanced/parameter_reference.html#EKF2_EV_DELAY">EKF2_EV_DELAY</a></td>
<td>&#x8BBE;&#x7F6E;&#x4E3A;&#x6D4B;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x6233;&#x548C; &quot;&#x5B9E;&#x9645;&quot; &#x6355;&#x83B7;&#x65F6;&#x95F4;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x3002; &#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; <a href="#tuning-EKF2_EV_DELAY">below</a>&#x3002;</td>
</tr>
<tr>
<td><a href="../advanced/parameter_reference.html#EKF2_EV_POS_X">EKF2_EV_POS_X</a>, <a href="../advanced/parameter_reference.html#EKF2_EV_POS_Y">EKF2_EV_POS_Y</a>, <a href="../advanced/parameter_reference.html#EKF2_EV_POS_Z">EKF2_EV_POS_Z</a></td>
<td>&#x8BBE;&#x7F6E;&#x89C6;&#x89C9;&#x4F20;&#x611F;&#x5668;&#xFF08;&#x6216; MoCap &#x6807;&#x8BB0;&#xFF09;&#x76F8;&#x5BF9;&#x4E8E;&#x673A;&#x5668;&#x4EBA;&#x7684;&#x8F66;&#x8EAB;&#x6846;&#x67B6;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</td>
</tr>
</tbody>
</table>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> &#x91CD;&#x65B0;&#x542F;&#x52A8;&#x98DE;&#x884C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x4EE5;&#x4FBF;&#x53C2;&#x6570;&#x66F4;&#x6539;&#x751F;&#x6548;&#x3002;</p>
</blockquote>
<h4 id="tuning-EKF2_EV_DELAY"><a name="tuning-EKF2_EV_DELAY" class="plugin-anchor" href="#tuning-EKF2_EV_DELAY"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8C03;&#x53C2; EKF2_EV_DELAY </h4>
<p><a href="../advanced/parameter_reference.html#EKF2_EV_DELAY">EKF2_EV_DELAY</a> is the <em>Vision Position Estimator delay relative to IMU measurements</em>.</p>
<p>Or in other words, it is the difference between the vision system timestamp and the &quot;actual&quot; capture time that would have been recorded by the IMU clock (the &quot;base clock&quot; for EKF2).</p>
<p>Technically this can be set to 0 if there is correct timestamping (not just arrival time) and timesync (e.g NTP) between MoCap and (for example) ROS computers. In reality, this needs some empirical tuning since delays in the entire MoCap-&gt;PX4 chain are very setup-specific. It is rare that a system is setup with an entirely synchronised chain!</p>
<p>A rough estimate of the delay can be obtained from logs by checking the offset between IMU rates and the EV rates:</p>
<p><img src="../../assets/ekf2/ekf2_ev_delay_tuning.png" alt="ekf2_ev_delay log"></p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x5916;&#x90E8;&#x6570;&#x636E;&#x56FE;&#x8868; &#x4E0E; onboard estimate (as above) can be generated using <a href="https://docs.px4.io/master/en/log/flight_log_analysis.html#flightplot" target="_blank">FlightPlot</a> or similar flight analysis tools.</p>
</blockquote>
<p>The value can further be tuned by varying the parameter to find the value that yields the lowest EKF innovations during dynamic maneuvers.</p>
<h2 id="lpe-&#x8C03;&#x53C2;&#x914D;&#x7F6E;"><a name="lpe-&#x8C03;&#x53C2;&#x914D;&#x7F6E;" class="plugin-anchor" href="#lpe-&#x8C03;&#x53C2;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>LPE &#x8C03;&#x53C2;/&#x914D;&#x7F6E;</h2>
<p>You will first need to <a href="../advanced/switching_state_estimators.html">switch to the LPE estimator</a> by setting the <a href="../advanced/parameter_reference.html#SYS_MC_EST_GROUP">SYS_MC_EST_GROUP</a> parameter.</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> &#x5982;&#x679C;&#x5B9A;&#x4F4D; <code>px4_fmu-v2</code> &#x786C;&#x4EF6;&#xFF0C;&#x5219;&#x8FD8;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5305;&#x542B; LPE &#x6A21;&#x5757;&#x7684;&#x56FA;&#x4EF6;&#x7248;&#x672C;&#xFF08;&#x5176;&#x4ED6; FMU &#x7CFB;&#x5217;&#x786C;&#x4EF6;&#x7684;&#x56FA;&#x4EF6;&#x5305;&#x62EC; LPE &#x548C; EKF&#xFF09;&#x3002; LPE &#x7248;&#x672C;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A; PX4 &#x7248;&#x672C;&#x7684; zip &#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x751F;&#x6210;&#x547D;&#x4EE4; <code>make px4_fmu-v2_lpe</code> &#x4ECE;&#x6E90;&#x751F;&#x6210;&#x3002; &#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;, &#x8BF7;&#x53C2;&#x9605; <a href="../setup/building_px4.html"> Building the code </a>&#x3002;</p>
</blockquote>
<h3 id="&#x542F;&#x7528;&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x8F93;&#x5165;"><a name="&#x542F;&#x7528;&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x8F93;&#x5165;" class="plugin-anchor" href="#&#x542F;&#x7528;&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x8F93;&#x5165;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x542F;&#x7528;&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x8F93;&#x5165;</h3>
<p>The following parameters must be set to use external position information with LPE (these can be set in <em>QGroundControl</em> &gt; <strong>Vehicle Setup &gt; Parameters &gt; Local Position Estimator</strong>).</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;</th>
<th>&#x5916;&#x90E8;&#x4F4D;&#x7F6E;&#x4F30;&#x8BA1;&#x7684;&#x8BBE;&#x7F6E;</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../advanced/parameter_reference.html#LPE_FUSION">LPE_FUSION</a></td>
<td>&#x5982;&#x679C;&#x9009;&#x4E2D;&#x4E86; <em>fuse &#x89C6;&#x89C9;&#x4F4D;&#x7F6E; </em>&#xFF08;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x542F;&#x7528;&#xFF09;&#xFF0C;&#x5219;&#x542F;&#x7528;&#x89C6;&#x89C9;&#x96C6;&#x6210;&#x3002;</td>
</tr>
<tr>
<td><a href="../advanced/parameter_reference.html#ATT_EXT_HDG_M">ATT_EXT_HDG_M</a></td>
<td>&#x8BBE;&#x7F6E;&#x4E3A;1&#x6216; 2&#xFF0C;&#x4EE5;&#x542F;&#x7528;&#x5916;&#x90E8;&#x6807;&#x9898;&#x96C6;&#x6210;&#x3002; &#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;1&#x5C06;&#x542F;&#x7528;&#x89C6;&#x89C9;&#xFF0C;&#x800C;2&#x5219;&#x542F;&#x7528;&#x4E86; MoCap heading &#x7684;&#x4F7F;&#x7528;&#x3002;</td>
</tr>
</tbody>
</table>
<h3 id="&#x7981;&#x7528;&#x6C14;&#x538B;&#x8BA1;&#x878D;&#x5408;"><a name="&#x7981;&#x7528;&#x6C14;&#x538B;&#x8BA1;&#x878D;&#x5408;" class="plugin-anchor" href="#&#x7981;&#x7528;&#x6C14;&#x538B;&#x8BA1;&#x878D;&#x5408;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7981;&#x7528;&#x6C14;&#x538B;&#x8BA1;&#x878D;&#x5408;</h3>
<p>If a highly accurate altitude is already available from VIO or MoCap information, it may be useful to disable the baro correction in LPE to reduce drift on the Z axis.</p>
<p>This can be done by in <em>QGroundControl</em> by unchecking the <em>fuse baro</em> option in the <a href="../advanced/parameter_reference.html#LPE_FUSION">LPE_FUSION</a> parameter.</p>
<h3 id="&#x6EE4;&#x6CE2;&#x566A;&#x58F0;&#x53C2;&#x6570;&#x8C03;&#x53C2;"><a name="&#x6EE4;&#x6CE2;&#x566A;&#x58F0;&#x53C2;&#x6570;&#x8C03;&#x53C2;" class="plugin-anchor" href="#&#x6EE4;&#x6CE2;&#x566A;&#x58F0;&#x53C2;&#x6570;&#x8C03;&#x53C2;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6EE4;&#x6CE2;&#x566A;&#x58F0;&#x53C2;&#x6570;&#x8C03;&#x53C2;</h3>
<p>If your vision or MoCap data is highly accurate, and you just want the estimator to track it tightly, you should reduce the standard deviation parameters: <a href="../advanced/parameter_reference.html#LPE_VIS_XY">LPE_VIS_XY</a> and <a href="../advanced/parameter_reference.html#LPE_VIS_Z">LPE_VIS_Z</a> (for VIO) or <a href="../advanced/parameter_reference.html#LPE_VIC_P">LPE_VIC_P</a> (for MoCap). Reducing them will cause the estimator to trust the incoming pose estimate more. You may need to set them lower than the allowed minimum and force-save.</p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> &#x5982;&#x679C;&#x6027;&#x80FD;&#x4ECD;&#x7136;&#x8F83;&#x5DEE;&#xFF0C;&#x8BF7;&#x5C1D;&#x8BD5;&#x589E;&#x5927; <a href="../advanced/parameter_reference.html#LPE_PN_V"> LPE_PN_V</a> &#x53C2;&#x6570;&#x3002; &#x8FD9;&#x5C06;&#x4F7F;&#x4F30;&#x8BA1;&#x5668;&#x5728;&#x4F30;&#x8BA1;&#x901F;&#x5EA6;&#x65F6;&#x66F4;&#x4FE1;&#x4EFB;&#x6D4B;&#x91CF;&#x503C;&#x3002;</p>
</blockquote>
<h2 id="&#x4F7F;&#x7528;-ros"><a name="&#x4F7F;&#x7528;-ros" class="plugin-anchor" href="#&#x4F7F;&#x7528;-ros"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4F7F;&#x7528; ROS</h2>
<p>ROS is not <em>required</em> for supplying external pose information, but is highly recommended as it already comes with good integrations with VIO and MoCap systems. PX4 must already have been set up as above.</p>
<h3 id="&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros"><a name="&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros" class="plugin-anchor" href="#&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165; ROS</h3>
<p>VIO and MoCap systems have different ways of obtaining pose data, and have their own setup and topics.</p>
<p>The setup for specific systems is covered <a href="#setup_specific_systems">below</a>. For other systems consult the vendor setup documentation.</p>
<h3 id="relaying_pose_data_to_px4"><a name="relaying_pose_data_to_px4" class="plugin-anchor" href="#relaying_pose_data_to_px4"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5C06;&#x6570;&#x636E;&#x56DE;&#x4F20;&#x7ED9; PX4 </h3>
<p>MAVROS has plugins to relay a visual estimation from a VIO or MoCap system using the following pipelines:</p>
<table>
<thead>
<tr>
<th>ROS</th>
<th>MAVLink</th>
<th>uORB</th>
</tr>
</thead>
<tbody>
<tr>
<td>/mavros/vision_pose/pose</td>
<td><a href="https://mavlink.io/en/messages/common.html#VISION_POSITION_ESTIMATE" target="_blank">VISION_POSITION_ESTIMATE</a></td>
<td><code>vehicle_visual_odometry</code></td>
</tr>
<tr>
<td>/mavros/odometry/out (<code>frame_id = odom</code>, <code>child_frame_id = base_link</code>)</td>
<td><a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank">ODOMETRY</a> (<code>frame_id =</code> <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_FRD" target="_blank">MAV_FRAME_LOCAL_FRD</a>)</td>
<td><code>vehicle_visual_odometry</code></td>
</tr>
<tr>
<td>/mavros/mocap/pose</td>
<td><a href="https://mavlink.io/en/messages/common.html#ATT_POS_MOCAP" target="_blank">ATT_POS_MOCAP</a></td>
<td><code>vehicle_mocap_odometry</code></td>
</tr>
<tr>
<td>/mavros/odometry/out (<code>frame_id = odom</code>, <code>child_frame_id = base_link</code>)</td>
<td><a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank">ODOMETRY</a> (<code>frame_id =</code> <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_FRD" target="_blank">MAV_FRAME_LOCAL_FRD</a>)</td>
<td><code>vehicle_mocap_odometry</code></td>
</tr>
</tbody>
</table>
<p>You can use any of the above pipelines with LPE.</p>
<p>If you&apos;re working with EKF2, only the &quot;vision&quot; pipelines are supported. To use MoCap data with EKF2 you will have to <a href="http://wiki.ros.org/roslaunch/XML/remap" target="_blank">remap</a> the pose topic that you get from MoCap:</p>
<ul>
<li>&#x5FC5;&#x987B;&#x91CD;&#x65B0;&#x6620;&#x5C04; <code>geometry_msgs/PoseStamped</code> &#x6216; <code>geometry_msgs/PoseWithCovarianceStamped</code> &#x7C7B;&#x578B;&#x7684; MOCAP ROS &#x4E3B;&#x9898;&#xFF0C;&#x4EE5; <code>/mavros/vision_pose/pose</code>&#x3002; <code>geometry_msgs/PoseStamped</code> &#x4E3B;&#x9898;&#x662F;&#x6700;&#x5E38;&#x89C1;&#x7684;&#xFF0C;&#x56E0;&#x4E3A; mocap &#x901A;&#x5E38;&#x6CA1;&#x6709;&#x4E0E;&#x6570;&#x636E;&#x76F8;&#x5173;&#x7684;&#x534F;&#x65B9;&#x5DEE;&#x3002;</li>
<li>If you get data through a <code>nav_msgs/Odometry</code> ROS message then you will need to remap it to <code>/mavros/odometry/out</code>, making sure to update the <code>frame_id</code> and <code>child_frame_id</code> accordingly.</li>
<li>The odometry frames <code>frame_id = odom</code>, <code>child_frame_id = base_link</code> can be changed by updating the file in <code>mavros/launch/px4_config.yaml</code>. However, the current version of mavros (<code>1.2.0</code>) needs to be able to use the tf tree to find a transform from <code>frame_id</code> to the hardcoded frame <code>odom_ned</code>. The same applies to the <code>child_frame_id</code>, which needs to be connected in the tf tree to the hardcoded frame <code>base_link_frd</code>. If you are using mavros <code>1.2.0</code> and you didn&apos;t update the file <code>mavros/launch/px4_config.yaml</code>, then you can safely use the odometry frames <code>frame_id = odom</code>, <code>child_frame_id = base_link</code> without much worry.</li>
<li>Note that if you are sending odometry data to px4 using <code>child_frame_id = base_link</code>, then then you need to make sure that the <code>twist</code> portion of the <code>nav_msgs/Odometry</code> message is <strong>expressed in body frame</strong>, <strong>not in inertial frame!!!!!</strong>.</li>
</ul>
<h3 id="ros_reference_frames"><a name="ros_reference_frames" class="plugin-anchor" href="#ros_reference_frames"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x8003;&#x6846;&#x67B6;&#x548C; ROS </h3>
<p>The local/world and world frames used by ROS and PX4 are different.</p>
<table>
<thead>
<tr>
<th>&#x6846;&#x67B6;</th>
<th>ROS</th>
<th>PX4</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x673A;&#x4F53;</td>
<td>FLU (x &lt; 0&gt;F&lt;/strong&gt;orward&#x3001;y &lt; 0&gt;L&lt;/strong&gt;eft&#x3001;z &lt; 0&gt;U&lt;/strong&gt;p), &#x901A;&#x5E38;&#x547D;&#x540D; <code>base_link</code></td>
<td>FRD (X <strong>F</strong>orward, Y <strong>R</strong>ight &#x548C; Z <strong>D</strong>own)</td>
</tr>
<tr>
<td>&#x4E16;&#x754C;&#x5750;&#x6807;&#x7CFB;</td>
<td>FLU or ENU (X <strong>E</strong>ast, Y <strong>N</strong>orth and Z Up), with the naming being <code>odom</code> or <code>map</code></td>
<td>FRD or NED (X <strong>N</strong>orth, Y <strong>E</strong>ast, Z <strong>D</strong>own)</td>
</tr>
</tbody>
</table>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong>
<p> &#x6709;&#x5173; ROS &#x6846;&#x67B6;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; <a href="http://www.ros.org/reps/rep-0105.html" target="_blank">REP105: Coordinate Frames for Mobile Platforms</a>&#x3002;</p>
</blockquote>
<p>Both frames are shown in the image below (FLU on left/FRD on right).</p>
<p><img src="../../assets/lpe/ref_frames.png" alt="Reference frames"></p>
<p>With EKF2 when using external heading estimation, magnetic north can either be ignored and or the heading offset to magnetic north can be calculated and compensated. Depending on your choice the yaw angle is given with respect to either magnetic north or local <em>x</em>.</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> When creating the rigid body in the MoCap software, remember to first align the robot&apos;s local <em>x</em> axis with the world <em>x</em> axis otherwise the yaw estimate will have an offset. This can stop the external pose estimate fusion from working properly. Yaw angle should be zero when body and reference frame align.</p>
</blockquote>
<p>Using MAVROS, this operation is straightforward. ROS uses ENU frames as convention, therefore position feedback must be provided in ENU. If you have an Optitrack system you can use <a href="https://github.com/ros-drivers/mocap_optitrack" target="_blank">mocap_optitrack</a> node which streams the object pose on a ROS topic already in ENU. With a remapping you can directly publish it on <code>mocap_pose_estimate</code> as it is without any transformation and MAVROS will take care of NED conversions.</p>
<p>The MAVROS odometry plugin makes it easy to handle the coordinate frames. It uses ROS&apos;s tf package. Your external pose system might have a completely different frame convention that does not match the one of PX4. The body frame of the external pose estimate can depend on how you set the body frame in the MOCAP software or on how you mount the VIO sensor on the drone. The MAVROS odometry plugin needs to know how the external pose&apos;s child frame is oriented with respect to either the airframe&apos;s FRD or FLU body frame known by MAVROS. You therefore have to add the external pose&apos;s body frame to the tf tree. This can be done by including an adapted version of the following line into your ROS launch file.</p>
<pre><code>  &lt;node pkg=&quot;tf&quot; type=&quot;static_transform_publisher&quot; name=&quot;tf_baseLink_externalPoseChildFrame&quot;
        args=&quot;0 0 0 &lt;yaw&gt; &lt;pitch&gt; &lt;roll&gt; base_link &lt;external_pose_child_frame&gt; 1000&quot;/&gt;
</code></pre><p>Make sure that you change the values of yaw, pitch and roll such that it properly attaches the external pose&apos;s body frame to the <code>base_link</code> or <code>base_link_frd</code>. Have a look at the <a href="http://wiki.ros.org/tf#static_transform_publisher" target="_blank">tf package</a> for further help on how to specify the transformation between the frames. You can use rviz to check if you attached the frame right. The name of the <code>external_pose_child_frame</code> has to match the child_frame_id of your <code>nav_msgs/Odometry</code> message. The same also applies for the reference frame of the external pose. You have to attach the reference frame of the external pose as child to either the <code>odom</code> or <code>odom_frd</code> frame. Adapt therefore the following code line accordingly.</p>
<pre><code>  &lt;node pkg=&quot;tf&quot; type=&quot;static_transform_publisher&quot; name=&quot;tf_odom_externalPoseParentFrame&quot;
        args=&quot;0 0 0 &lt;yaw&gt; &lt;pitch&gt; &lt;roll&gt; odom &lt;external_pose_parent_frame&gt; 1000&quot;/&gt;
</code></pre><p>If the reference frame has the z axis pointing upwards you can attached it without any rotation (yaw=0, pitch=0, roll=0) to the <code>odom</code> frame. The name of <code>external_pose_parent_frame</code> has to match the frame_id of the odometry message.</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> When using the MAVROS <em>odom</em> plugin, it is important that no other node is publishing a transform between the external pose&apos;s reference and child frame. This might break the <em>tf</em> tree.</p>
</blockquote>
<h2 id="setup_specific_systems"><a name="setup_specific_systems" class="plugin-anchor" href="#setup_specific_systems"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7279;&#x5B9A;&#x7684;&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E; </h2>
<h3 id="&#x5149;&#x5B66;&#x8DDF;&#x8E2A;-mocap"><a name="&#x5149;&#x5B66;&#x8DDF;&#x8E2A;-mocap" class="plugin-anchor" href="#&#x5149;&#x5B66;&#x8DDF;&#x8E2A;-mocap"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5149;&#x5B66;&#x8DDF;&#x8E2A; MoCap</h3>
<p>The following steps explain how to feed position estimates from an <a href="https://optitrack.com/motion-capture-robotics/" target="_blank">OptiTrack</a> system to PX4. It is assumed that the MoCap system is calibrated. See <a href="https://www.youtube.com/watch?v=cNZaFEghTBU" target="_blank">this video</a> for a tutorial on the calibration process.</p>
<h4 id="&#x8BBE;&#x7F6E;-motive-mocap-&#x8F6F;&#x4EF6;"><a name="&#x8BBE;&#x7F6E;-motive-mocap-&#x8F6F;&#x4EF6;" class="plugin-anchor" href="#&#x8BBE;&#x7F6E;-motive-mocap-&#x8F6F;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8BBE;&#x7F6E; <em>Motive</em> mocap &#x8F6F;&#x4EF6;</h4>
<ul>
<li>&#x5C06;&#x65E0;&#x4EBA;&#x673A;&#x7684;&#x524D;&#x8FDB;&#x65B9;&#x5411;&#x4E0E; <a href="https://v20.wiki.optitrack.com/index.php?title=Template:Coordinate_System" target="_blank">system + x-axiss</a> &#x5BF9;&#x9F50;</li>
<li><a href="https://www.youtube.com/watch?v=1e6Qqxqe-k0" target="_blank">Define a rigid body in the Motive software</a>&#x3002; &#x4E3A;&#x673A;&#x5668;&#x4EBA;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x4E0D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4F8B;&#x5982; <code>robot1</code> &#x800C;&#x4E0D;&#x662F; <code>Rigidbody 1</code></li>
<li><a href="https://www.youtube.com/watch?v=yYRNG58zPFo" target="_blank">&#x542F;&#x7528;&#x5E27;&#x5E7F;&#x64AD;&#x548C; VRPN &#x6D41;</a></li>
<li>&#x5C06; &quot;&#x5411;&#x4E0A;&quot; &#x8F74;&#x8BBE;&#x7F6E;&#x4E3A; z &#x8F74;&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; y&#xFF09;</li>
</ul>
<h4 id="&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros"><a name="&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros" class="plugin-anchor" href="#&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165;-ros"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5C06;&#x6570;&#x636E;&#x8F93;&#x5165; ROS</h4>
<ul>
<li>&#x5B89;&#x88C5; <code>vrpn_client_ros</code> &#x5305;</li>
<li>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD0;&#x884C;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x8BDD;&#x9898;&#x4E0A;&#x5F97;&#x5230;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x4F53;&#x7684;&#x59FF;&#x52BF; <pre><code>  bash
  roslaunch vrpn_client_ros sample.launch server:=&lt;mocap machine ip&gt;
</code></pre></li>
</ul>
<p>If you named the rigidbody as <code>robot1</code>, you will get a topic like <code>/vrpn_client_node/robot1/pose</code></p>
<h4 id="&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x6570;&#x636E;"><a name="&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x6570;&#x636E;" class="plugin-anchor" href="#&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x91CD;&#x65B0;&#x6620;&#x5C04;/&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x6570;&#x636E;</h4>
<p>MAVROS provides a plugin to relay pose data published on <code>/mavros/vision_pose/pose</code> to PX4. Assuming that MAVROS is running, you just need to <strong>remap</strong> the pose topic that you get from MoCap <code>/vrpn_client_node/&lt;rigid_body_name&gt;/pose</code> directly to <code>/mavros/vision_pose/pose</code>. Note that there is also a <code>mocap</code> topic that MAVROS provides to feed <code>ATT_POS_MOCAP</code> to PX4, but it is not applicable for EKF2. However, it is applicable with LPE.</p>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-2x fa-edit"></strong>
<p> Remapping pose topics is covered above <a href="#relaying_pose_data_to_px4">Relaying pose data to PX4</a> (<code>/vrpn_client_node/&lt;rigid_body_name&gt;/pose</code> is of type <code>geometry_msgs/PoseStamped</code>).</p>
</blockquote>
<p>Assuming that you have configured EKF2 parameters as described above, PX4 now is set and fusing MoCap data.</p>
<p>You are now set to proceed to the first flight.</p>
<h2 id="&#x7B2C;&#x4E00;&#x6B21;&#x98DE;&#x884C;"><a name="&#x7B2C;&#x4E00;&#x6B21;&#x98DE;&#x884C;" class="plugin-anchor" href="#&#x7B2C;&#x4E00;&#x6B21;&#x98DE;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7B2C;&#x4E00;&#x6B21;&#x98DE;&#x884C;</h2>
<p>After setting up one of the (specific) systems described above you should now be ready to test. The instructions below show how to do so for MoCap and VIO systems</p>
<h3 id="check-external-estimate"><a name="check-external-estimate" class="plugin-anchor" href="#check-external-estimate"><i class="fa fa-link" aria-hidden="true"></i></a>Check external estimate</h3>
<p>Be sure to perform the following checks before your first flight:</p>
<ul>
<li>Set the PX4 parameter <code>MAV_ODOM_LP</code> to 1. PX4 will then stream back the received external pose as MAVLink <a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank">ODOMETRY</a> messages.</li>
<li>You can check these MAVLink messages with the <em>QGroundControl</em> <a href="https://docs.qgroundcontrol.com/en/analyze_view/mavlink_inspector.html" target="_blank">MAVLink Inspector</a> In order to do this, yaw the vehicle until the quaternion of the <code>ODOMETRY</code> message is very close to a unit quaternion. (w=1, x=y=z=0)</li>
<li>At this point the body frame is aligned with the reference frame of the external pose system. If you do not manage to get a quaternion close to the unit quaternion without rolling or pitching your vehicle, your frame probably still have a pitch or roll offset. Do not proceed if this is the case and check your coordinate frames again.</li>
<li>Once aligned you can pick the vehicle up from the ground and you should see the position&apos;s z coordinate decrease. Moving the vehicle in forward direction, should increase the position&apos;s x coordinate. While moving the vehicle to the right should increase the y coordinate. In the case you send also linear velocities from the external pose system, you should also check the linear velocities. Check that the linear velocities are in expressed in the <em>FRD</em> body frame reference frame.</li>
<li>Set the PX4 parameter <code>MAV_ODOM_LP</code> back to 0. PX4 will stop streaming this message back.</li>
</ul>
<p>If those steps are consistent, you can try your first flight.</p>
<p>Put the robot on the ground and start streaming MoCap feedback. Lower your left (throttle) stick and arm the motors.</p>
<p>At this point, with the left stick at the lowest position, switch to position control. You should have a green light. The green light tells you that position feedback is available and position control is now activated.</p>
<p>Put your left stick at the middle, this is the dead zone. With this stick value, the robot maintains its altitude; raising the stick will increase the reference altitude while lowering the value will decrease it. Same for right stick on x and y.</p>
<p>Increase the value of the left stick and the robot will take off, put it back to the middle right after. Check if it is able to keep its position.</p>
<p>If it works, you may want to set up an <a href="offboard_control.html">offboard</a> experiment by sending position-setpoint from a remote ground station.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="raspberrypi_installation.html" class="navigation navigation-prev " aria-label="Previous page: 在 RPi 上安装 ROS">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="mavros_custom_messages.html" class="navigation navigation-next " aria-label="Next page: Sending Custom Messages from MAVROS">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"外部位置估计（基于视觉/运动）","level":"1.8.2.6","depth":3,"next":{"title":"Sending Custom Messages from MAVROS","level":"1.8.2.7","depth":3,"path":"ros/mavros_custom_messages.md","ref":"ros/mavros_custom_messages.md","articles":[]},"previous":{"title":"在 RPi 上安装 ROS","level":"1.8.2.5","depth":3,"path":"ros/raspberrypi_installation.md","ref":"ros/raspberrypi_installation.md","articles":[]},"dir":"ltr"},"config":{"plugins":["youtube","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","collapsible-menu","anchors","page-toc-button","ga","language-picker","custom-favicon","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","validate-links","versions-select@git+https://github.com/Dronecode/gitbook-plugin-versions-select.git","mathjax@git+https://github.com/Dronecode/plugin-mathjax.git#update_cdn","-mermaid","-stub-out-blocks@git+https://github.com/hamishwillee/gitbook-plugin-stub-out-blocks.git","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"theme-dronecode":{"logo":{"logo_large":"gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_full.png","logo_small":"gitbook-plugin-theme-dronecode/images/dronecode_top_bar_logo_small.png","url":"https://www.dronecode.org/"}},"validate-links":{"defaultScheme":"https","local":"warn","remote":"disabled"},"collapsible-menu":{},"language-picker":{"grid-columns":3},"youtube":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"versions-select":{"type":"branches"},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{"tip":{"alert":"success","picto":"fa-thumbs-o-up"}},"highlight":{},"favicon":"favicon.ico","page-toc-button":{},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"custom-favicon":{},"mathjax":{"forceSVG":false,"version":"2.7.6"},"ga":{"configuration":"auto","token":"UA-33658859-3"},"versions":{"gitbookConfigURL":"https://raw.githubusercontent.com/PX4/Devguide/master/book.json","options":[{"value":"https://dev.px4.io/master/en/","text":"master"},{"value":"https://dev.px4.io/v1.11/en/","text":"1.11 - stable"},{"value":"https://dev.px4.io/v1.10/en/","text":"1.10"},{"value":"https://dev.px4.io/v1.9.0/en/","text":"1.9 "},{"value":"https://dev.px4.io/v1.8.2/en/","text":"1.8.2"},{"value":"https://dev.px4.io/v1.8.0/en/","text":"1.8.0"}]},"toolbar":{"buttons":[{"label":"Bug tracker","icon":"fa fa-bug","position":"left","url":"https://github.com/PX4/Devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{"label":"GitHub","icon":"fa fa-github","url":"https://github.com/PX4/Devguide"},{"label":"Edit page on github","icon":"fa fa-pencil-square-o","position":"left","url":"https://github.com/PX4/Devguide/edit/master/{{filepath_lang}}"}]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"logo":"./assets/site/logo_pro_small.png","px4_version":"master"},"title":"PX4 Developer Guide","language":"zh","gitbook":"*"},"file":{"path":"ros/external_position_estimation.md","mtime":"2020-10-26T05:45:43.121Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-10-26T05:46:28.500Z"},"basePath":"..","book":{"language":"zh"}});
        });
    </script>
</div>

    

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-versions-select/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

